"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[1268],{6564:function(e,n,t){t.d(n,{I:function(){return u}});var s=t(68248),o=t(46709),r=t(95379),i=t(7655),l=t(27757),a=t(66916),d=t(27556),c=t(73408);const u=({chartsSearchFilter:e})=>{const n=(0,r.g_)(),{theme:t}=(0,l.u)(),[u,h]=(0,o.useState)((()=>null!==e&&void 0!==e?e:"")),[p,m]=(0,o.useState)(!1),{formatMessage:f}=(0,i.A)(),g=(0,o.useCallback)((e=>{n((n=>({...n,chartsSearchFilter:e}))),m(!1)}),[n]),w=(0,d.YQ)(g,150);return(0,c.Y)(a.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsfilterinput.tsx_30",role:"searchbox",prefix:(0,c.Y)("div",{css:(0,s.AH)({width:t.general.iconFontSize,lineHeight:0},""),children:p?(0,c.Y)(l.S,{size:"small"}):(0,c.Y)(a.S,{})}),value:u,allowClear:!0,onChange:e=>{h(e.target.value),m(!0),w(e.target.value)},placeholder:f({id:"Xs1oJm",defaultMessage:"Search metric charts"})})}},47946:function(e,n,t){t.d(n,{L:function(){return a}});var s=t(16389),o=t(5690),r=t(44105),i=t(46709),l=t(56530);const a=({runUuids:e,runUuidsIsActive:n,autoRefreshEnabled:t,enabled:a})=>{const d=(0,l.wA)(),c=e.slice(0,r.Lf).join(",");(0,i.useEffect)((()=>{a&&!t&&c.split(",").forEach((e=>{e&&d((0,o.LN)(e))}))}),[c,d,t,a]);const u=(0,i.useRef)(void 0),h=(0,i.useRef)(t&&a);h.current=t;const p=n.slice(0,r.Lf).join(",");(0,i.useEffect)((()=>{let e=!1;if(!a||!t)return;const n=async e=>{const n=c.split(","),t=p.split(",");(e?n.filter(((e,n)=>"true"===t[n])):n).forEach((n=>{n&&d((0,o.LN)(n,e))}))},i=async()=>{if(h.current&&!e){try{await n(!0)}catch(t){s.A.logErrorAndNotifyUser(t)}clearTimeout(u.current),h.current&&!e&&(u.current=window.setTimeout(i,r.zD))}};return n(!1).then(i),()=>{n(!0),e=!0,clearTimeout(u.current)}}),[d,c,p,t,a])}},61293:function(e,n,t){t.d(n,{$:function(){return o}});var s=t(46709);const o=()=>{const[e,n]=(0,s.useState)("visible"===document.visibilityState);return(0,s.useEffect)((()=>{document.addEventListener("visibilitychange",(e=>{n("visible"===document.visibilityState)}))}),[]),e}},67901:function(e,n,t){t.d(n,{f:function(){return w}});var s=t(68248),o=t(27757),r=t(74060),i=t(79081),l=t(53274),a=t(46709),d=t(27476),c=t(7655),u=t(40724),h=t(73408);var p={name:"ozd7xs",styles:"flex-shrink:0"},m={name:"1v0pok0",styles:"min-width:300px"},f={name:"11jf4ye",styles:"display:flex;gap:8px"},g={name:"bsla3r",styles:"max-height:300px;overflow:auto"};const w=({globalLineChartConfig:e,metricKeyList:n,updateUIState:t})=>{const{theme:w}=(0,o.u)(),_=(0,c.A)(),{lineSmoothness:v,selectedXAxisMetricKey:M,xAxisKey:D}=e||{},C=(0,a.useCallback)((e=>t((n=>({...n,globalLineChartConfig:{...n.globalLineChartConfig,...e}})))),[t]),y=D===l.fj.METRIC,b=_.formatMessage({id:"Kkr/RI",defaultMessage:"Configure charts"});return(0,h.FD)(r.DropdownMenu.Root,{modal:!1,children:[(0,h.Y)(i.T,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_44",content:b,children:(0,h.Y)(r.DropdownMenu.Trigger,{asChild:!0,children:(0,h.Y)(o.B,{componentId:"mlflow.charts.controls.global_chart_setup_dropdown",icon:(0,h.Y)(r.GearIcon,{}),"aria-label":b,css:p})})}),(0,h.FD)(r.DropdownMenu.Content,{align:"end",css:m,children:[(0,h.FD)(r.DropdownMenu.Group,{role:"region","aria-label":_.formatMessage({id:"Jp79WH",defaultMessage:"X-axis"}),children:[(0,h.Y)(r.DropdownMenu.Label,{css:f,children:(0,h.Y)(u.A,{id:"Jp79WH",defaultMessage:"X-axis"})}),(0,h.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_68",checked:D===l.fj.STEP,onClick:()=>C({xAxisKey:l.fj.STEP}),children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{}),(0,h.Y)(u.A,{id:"53b+wP",defaultMessage:"Step"})]}),(0,h.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_78",checked:D===l.fj.TIME,onClick:()=>C({xAxisKey:l.fj.TIME}),children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{}),(0,h.Y)(u.A,{id:"/QYbzP",defaultMessage:"Time (wall)"})]}),(0,h.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_88",checked:D===l.fj.TIME_RELATIVE,onClick:()=>C({xAxisKey:l.fj.TIME_RELATIVE}),children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{}),(0,h.Y)(u.A,{id:"sIC5K3",defaultMessage:"Time (relative)"})]}),(0,h.FD)(r.DropdownMenu.Sub,{children:[(0,h.FD)(r.DropdownMenu.SubTrigger,{css:(0,s.AH)({paddingLeft:w.spacing.xs+w.spacing.sm},""),children:[(0,h.Y)(r.DropdownMenu.IconWrapper,{children:(0,h.Y)(i.C,{css:(0,s.AH)({visibility:y?"visible":"hidden"},"")})}),(0,h.Y)(u.A,{id:"yCncIr",defaultMessage:"Metric"})]}),(0,h.Y)(r.DropdownMenu.SubContent,{css:g,children:n.map((e=>(0,h.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_118",checked:M===e&&y,onClick:()=>C({xAxisKey:l.fj.METRIC,selectedXAxisMetricKey:e}),children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{}),e]},e)))})]})]}),(0,h.FD)(r.DropdownMenu.Group,{role:"region","aria-label":_.formatMessage({id:"qkRBUr",defaultMessage:"Line smoothing"}),children:[(0,h.Y)(r.DropdownMenu.Label,{children:(0,h.Y)(u.A,{id:"qkRBUr",defaultMessage:"Line smoothing"})}),(0,h.Y)("div",{css:(0,s.AH)({padding:w.spacing.sm},""),children:(0,h.Y)(d.o,{min:0,max:100,onChange:e=>C({lineSmoothness:e}),value:v||0})})]})]})]})}},71206:function(e,n,t){t.d(n,{j:function(){return m}});var s=t(46709),o=t(56530),r=t(84173),i=t(29452),l=t(14466),a=t(5690),d=t(43233),c=t(73408);class u extends s.Component{constructor(...e){super(...e),this.formRef=s.createRef(),this.handleRenameRun=e=>{const n=e[l.m],t=(0,d.yk)();return this.props.updateRunApi(this.props.runUuid,n,t).then((()=>{var e,n;return null===(e=(n=this.props).onSuccess)||void 0===e?void 0:e.call(n)}))}}render(){const{isOpen:e=!1,runName:n}=this.props;return(0,c.Y)(i.B,{title:this.props.intl.formatMessage({id:"+Dnww0",defaultMessage:"Rename Run"}),okText:this.props.intl.formatMessage({id:"7NKkk1",defaultMessage:"Save"}),isOpen:e,handleSubmit:this.handleRenameRun,onClose:this.props.onClose,children:(0,c.Y)(l.P,{type:"run",name:n,innerRef:this.formRef,visible:e,validator:async(e,n)=>{if("string"===typeof n&&n.length&&!n.trim())throw new Error(this.props.intl.formatMessage({id:"ze1m7Z",defaultMessage:"Run name cannot consist only of whitespace!"}));return!0}})})}}const h={updateRunApi:a.FZ},p=(0,r.Ay)(u),m=(0,o.Ng)(void 0,h)(p)},79196:function(e,n,t){t.d(n,{o:function(){return l}});var s=t(49708),o=t(76118),r=t(61077);const i=async({queryKey:[,e]})=>{const n=(0,o.chunk)(e,100);return Promise.all(n.map((e=>{const n=new URLSearchParams;for(const t of e)n.append("model_ids",t);return(0,r.ff)((0,r.we)(`ajax-api/2.0/mlflow/logged-models:batchGet?${n.toString()}`),"GET")})))},l=({modelIds:e},n)=>{const{data:t,isLoading:o,isFetching:r,refetch:l,error:a}=(0,s.I)({queryKey:(d=null!==e&&void 0!==e?e:[],["GET_LOGGED_MODELS",d]),queryFn:i,select:e=>null===e||void 0===e?void 0:e.flatMap((e=>(null===e||void 0===e?void 0:e.models)||[])),retry:!1,...n});var d;return{isLoading:o,isFetching:r,data:t,refetch:l,error:a}}},90460:function(e,n,t){t.d(n,{f:function(){return u},y:function(){return a}});var s=t(68248),o=t(46709),r=t(30676),i=t(76118),l=t(73408);const a=({json:e,wrapperStyle:n,overlayStyle:t,codeSnippetStyle:o})=>{const{formattedJson:i,isJsonContent:a}=d(e);return(0,l.Y)("div",{style:{position:"relative",maxHeight:"calc(1.5em * 9)",overflow:"hidden",...n},children:a?(0,l.FD)(l.FK,{children:[(0,l.Y)(r.z7,{language:"json",style:{padding:"5px",overflowX:"hidden",...o},children:i}),(0,l.Y)("div",{css:(0,s.AH)({position:"absolute",bottom:0,right:0,left:6,height:"2em",background:"linear-gradient(transparent, white)",...t},"")})]}):(0,l.Y)(l.FK,{children:e})})};function d(e){return o.useMemo((()=>{try{const n=JSON.parse(e),t=(0,i.isObject)(n)&&"function"!==typeof n&&!(n instanceof Date);return{formattedJson:t?JSON.stringify(n,null,2):e,isJsonContent:t}}catch(n){return{formattedJson:e,isJsonContent:!1}}}),[e])}var c={name:"1089mxj",styles:"white-space:pre-wrap"};const u=({json:e})=>{const{formattedJson:n,isJsonContent:t}=d(e);return(0,l.Y)("div",{css:c,children:t?(0,l.Y)(r.z7,{language:"json",wrapLongLines:!0,children:n}):(0,l.Y)("span",{children:e})})}},94721:function(e,n,t){var s=t(46709),o=t(5690),r=t(56530),i=t(16389),l=t(84173),a=t(27757),d=t(79081),c=t(90142),u=t(73408);class h extends s.Component{constructor(e){super(e),this.state={deletingMode:null},this.handleDelete=this.handleDelete.bind(this),this.handleDeleteSelected=this.handleDeleteSelected.bind(this),this.handleDeleteWithChildren=this.handleDeleteWithChildren.bind(this),this.onRequestClose=this.onRequestClose.bind(this)}getChildRunIdsToDelete(){const{childRunIdsBySelectedParent:e,selectedRunIds:n}=this.props,t=new Set(n),s=new Set;return Object.values(e).forEach(((e=[])=>{e.forEach((e=>{t.has(e)||s.add(e)}))})),Array.from(s)}getRunIdsToDelete(e){if(!e)return this.props.selectedRunIds;const n=this.getChildRunIdsToDelete();return[...this.props.selectedRunIds,...n]}handleDelete(e){return this.state.deletingMode?Promise.resolve():(this.setState({deletingMode:e?"withChildren":"selected"}),this.deleteRuns(e))}handleDeleteSelected(){return this.handleDelete(!1)}handleDeleteWithChildren(){return this.handleDelete(!0)}deleteRuns(e){const n=[];return this.getRunIdsToDelete(e).forEach((e=>{n.push(this.props.deleteRunApi(e))})),Promise.all(n).catch((()=>{const e=`${this.props.intl.formatMessage({id:"tdmVWN",defaultMessage:"While deleting an experiment run, an error occurred."})}`;this.props.openErrorModal(e)})).then((()=>{var e,n;null===(e=(n=this.props).onSuccess)||void 0===e||e.call(n)})).finally((()=>{this.setState({deletingMode:null}),this.props.onClose()}))}onRequestClose(){this.state.deletingMode||this.props.onClose()}render(){const e=this.props.selectedRunIds.length,n=this.getChildRunIdsToDelete().length,t=n>0,s=e+n,{deletingMode:o}=this.state,r="selected"===o,l="withChildren"===o,c=(0,u.Y)(a.B,{componentId:"delete-selected",onClick:this.handleDeleteSelected,disabled:l,loading:r,type:"primary",children:"Delete selected"},"delete-selected"),h=t?(0,u.Y)(a.B,{componentId:"delete-selected-children",type:"primary",onClick:this.handleDeleteWithChildren,disabled:r,loading:l,children:"Delete selected and children"},"delete-selected-children"):null,p=[(0,u.Y)(a.B,{componentId:"cancel",onClick:this.onRequestClose,disabled:!!o,children:"Cancel"},"cancel"),c,...h?[h]:[]];return(0,u.Y)(d.d,{componentId:"delete-run-modal","data-testid":"delete-run-modal",title:`Delete Experiment ${i.A.pluralize("Run",e)}`,visible:this.props.isOpen,onCancel:this.onRequestClose,footer:p,children:(0,u.FD)("div",{className:"modal-explanatory-text",children:[(0,u.Y)("p",{children:(0,u.FD)("b",{children:["Selected ",e," experiment ",i.A.pluralize("run",e),"."]})}),t?(0,u.FD)("p",{children:["The selected run has ",n," child ",i.A.pluralize("run",n),". Delete this run alone or all ",s,"?"]}):null,""]})})}}const p={deleteRunApi:o.IX,openErrorModal:o.Yi};n.A=(0,r.Ng)(((e,n)=>{var t;const s=(null===(t=e.entities)||void 0===t?void 0:t.tagsByRunUuid)||{},o={};Object.entries(s).forEach((([e,n])=>{const t=null===n||void 0===n?void 0:n[c.Ol],s=null===t||void 0===t?void 0:t.value;s&&(o[s]||(o[s]=[]),o[s].push(e))}));const r={};return n.selectedRunIds.forEach((e=>{const n=(e=>{const n=[],t=[...o[e]||[]],s=new Set;for(;t.length;){const e=t.pop();if(e&&!s.has(e)){s.add(e),n.push(e);const r=o[e];r&&t.push(...r)}}return n})(e);n.length&&(r[e]=n)})),{childRunIdsBySelectedParent:r}}),p)((0,l.Ay)(h))}}]);