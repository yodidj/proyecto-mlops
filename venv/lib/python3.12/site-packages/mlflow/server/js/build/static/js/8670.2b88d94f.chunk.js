"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[8670],{9858:function(e,n,t){t.d(n,{CY:function(){return f},G8:function(){return i},IX:function(){return o},OV:function(){return l},QO:function(){return E},YH:function(){return a},wG:function(){return m},x2:function(){return g}});var s=t(76118),r=t(90448);const a={up:"#02B30214",down:"#F000400F"},i="#64172B",o="#077A9D",l="#FFAB00",u="#99DDB4",d="#FCA4A1",c="#02B30214",f=(e,n,t)=>{if("pass-fail"===n.dtype){if((null===t||void 0===t?void 0:t.stringValue)===r.gZ.YES)return e.isDarkMode?e.colors.green400:e.colors.green600;if((null===t||void 0===t?void 0:t.stringValue)===r.gZ.NO)return e.isDarkMode?e.colors.red400:e.colors.red600}return null!==t&&void 0!==t&&t.errorMessage?e.colors.textValidationWarning:e.colors.grey400},g=(e,n,t,a=!1)=>{if("pass-fail"===n.dtype){if((null===t||void 0===t?void 0:t.stringValue)===r.gZ.YES)return c;if((null===t||void 0===t?void 0:t.stringValue)===r.gZ.NO)return e.isDarkMode?(0,r.fu)(e.colors.red800,.6):e.colors.red200;if(!a&&null!==t&&void 0!==t&&t.errorMessage)return""}else if("boolean"===n.dtype)return(0,s.isNil)(null===t||void 0===t?void 0:t.booleanValue)?"":t.booleanValue?c:e.isDarkMode?e.colors.red800:e.colors.red200;return""},m=(e,n,t)=>null!==t&&void 0!==t&&t.errorMessage?e.colors.textValidationWarning:"pass-fail"===n.dtype?(null===t||void 0===t?void 0:t.stringValue)===r.gZ.YES?e.isDarkMode?e.colors.green400:e.colors.green600:(null===t||void 0===t?void 0:t.stringValue)===r.gZ.NO?e.isDarkMode?e.colors.red400:e.colors.red600:e.colors.textSecondary:"boolean"===n.dtype?(0,s.isNil)(null===t||void 0===t?void 0:t.booleanValue)?e.colors.textSecondary:e.colors.textPrimary:"unknown"===n.dtype?e.colors.textSecondary:e.colors.textPrimary,E=(e,n,t,a)=>a?"#f09065":"pass-fail"===n.dtype?t===r.gZ.YES?u:t===r.gZ.NO?d:e.isDarkMode?e.colors.grey800:e.colors.grey200:"boolean"===n.dtype?(0,s.isNil)(t)?e.isDarkMode?e.colors.grey800:e.colors.grey200:t?u:d:e.isDarkMode?e.colors.grey800:e.colors.grey200},10708:function(e,n,t){t.d(n,{g:function(){return h},m:function(){return y}});var s=t(68248),r=t(76118),a=t(46709),i=t(27757),o=t(74060),l=t(66916),u=t(79081),d=t(42747),c=t(90448),f=t(9858),g=t(87879),m=t(38086),E=t(73408);const h=(e,n)=>{if(!(0,r.isNil)(n))if("pass-fail"===e.dtype){if(n===c.gZ.YES)return!0;if(n===c.gZ.NO)return!1}else if("boolean"===e.dtype)return!0===n};var v={name:"1jwcxx3",styles:"font-style:italic"},p={name:"1jwcxx3",styles:"font-style:italic"};var N={name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"},S={name:"1ykowef",styles:"margin-bottom:0"},M={name:"6jwybp",styles:"height:16px"},A={name:"dao2zk",styles:"display:contents;& p{margin-bottom:0;}"};const y=({assessment:e,onEdit:n,active:t=!1,disableJudgeTypeIcon:y,showRationaleInTooltip:C=!1,showPassFailText:I=!1,hideAssessmentName:_=!1,iconOnly:L=!1,disableTooltip:T=!1,isRootCauseAssessment:b,assessmentInfo:O,type:Y,count:x})=>{var D,V;const{theme:w}=(0,i.u)(),F=(0,d.tz)(),U=e?(0,c.Zh)(e):void 0,k=(0,a.useMemo)((()=>h(O,U)),[U,O]),z=(0,f.CY)(w,O,e),j=(0,f.wG)(w,O,e);let H;(null!==e&&void 0!==e&&e.errorMessage||void 0===k&&e&&c.jr[e.name])&&(H=e.errorMessage||F.formatMessage(c.jr[e.name]));const G=e?c.c9[e.name]:void 0,B=(0,a.useMemo)((()=>G?F.formatMessage(G):null===e||void 0===e?void 0:e.name),[e,G,F]),P=(0,a.useMemo)((()=>e?(0,c.FN)(c.pZ[e.name]):void 0),[e]),{makeHTML:Z}=(0,m.N)(),K=(0,a.useMemo)((()=>{const n=null===e||void 0===e?void 0:e.rationale;return(0,r.isString)(n)?Z(n):void 0}),[e,Z]),q=(0,a.useMemo)((()=>!(0,r.isNil)(e)&&(0,c.w_)(e)),[e]),{tagText:W,icon:X,fullTagText:$}=(0,a.useMemo)((()=>function(e,n,t,a,u,m,N){let S,M="",A=(0,E.Y)(E.FK,{});const y={tagText:(0,E.Y)(d.sA,{id:"AX7L9r",defaultMessage:"Error"}),icon:(0,E.Y)(i.k,{css:(0,s.AH)({color:e.colors.textValidationWarning},"")})},R={tagText:(0,E.Y)("span",{css:v,children:(0,E.Y)(d.sA,{id:"H2UIIZ",defaultMessage:"null"})}),icon:(0,E.Y)(i.W,{css:(0,s.AH)({color:e.colors.grey400},"")})},C=m?(0,c.Zh)(m):void 0;if(Boolean(null===m||void 0===m?void 0:m.errorMessage))return y;if("pass-fail"===a.dtype||"boolean"===a.dtype){const u=h(a,C);let g="";if("pass-fail"===a.dtype)if(!0===u)g=n.formatMessage({id:"Kya8N3",defaultMessage:"Pass"});else{if(!1!==u)return R;g=n.formatMessage({id:"bz4brG",defaultMessage:"Fail"})}else if(!0===u)g=n.formatMessage({id:"lo5Me/",defaultMessage:"True"});else{if(!1!==u)return R;g=n.formatMessage({id:"OZXWas",defaultMessage:"False"})}const v=(0,f.CY)(e,a,m);if(A=!0===u?(0,E.Y)(o.CheckCircleIcon,{css:(0,s.AH)({color:v},"")}):!1===u?N?(0,E.Y)(l.X,{css:(0,s.AH)({color:v},"")}):(0,E.Y)(o.XCircleIcon,{css:(0,s.AH)({color:v},"")}):(0,E.Y)(i.W,{css:(0,s.AH)({color:v},"")}),"assessment-value"===t){const e=c.yQ[a.name];if(e){var I;const n=C&&null!==(I=e[C.toString()])&&void 0!==I?I:e[c.gZ.YES];n&&(M=(0,E.Y)(d.sA,{...n,values:{value:C}}))}else M=(0,E.FD)(E.FK,{children:[a.displayName,": ",C]})}else"value"===t&&(M=(0,r.isNil)(u)?(0,E.Y)("span",{css:p,children:g}):g)}else if("numeric"===a.dtype){const e=(0,r.isNil)(C)?C:(0,g.BM)(C);if("assessment-value"===t)M=(0,E.FD)(E.FK,{children:[a.displayName,": ",e]}),S=(0,E.FD)(E.FK,{children:[a.displayName,": ",C]});else{if((0,r.isNil)(e))return R;M=`${e}`,S=`${C}`}}else{if((0,r.isNil)(C))return R;const e=(0,E.Y)(E.FK,{children:String(C)});M="assessment-value"===t?(0,r.isNil)(C)?(0,E.Y)(E.FK,{children:a.displayName}):(0,E.FD)(E.FK,{children:[a.displayName,": ",e]}):e}return{tagText:M,icon:A,fullTagText:S}}(w,F,Y,O,0,e,b)),[w,F,Y,O,e,b,q]),Q=(0,E.FD)(E.FK,{children:[W,x&&x>1?` (${x})`:""]});if("HUMAN"===(null===(D=O.source)||void 0===D?void 0:D.sourceType)&&!(null!==e&&void 0!==e&&null!==(V=e.source)&&void 0!==V&&V.sourceId))return(0,E.Y)(E.FK,{});const J=(0,E.Y)("div",{children:(0,E.Y)(R,{iconOnly:L,hideAssessmentName:_,tagContent:Q,active:t,icon:X,iconColor:z,textColor:j,sourceIcon:O.isCustomMetric?(0,E.Y)(o.BracketsXIcon,{}):e&&q?(0,E.Y)(o.UserIcon,{}):(0,E.Y)(o.SparkleDoubleIcon,{}),backgroundColor:(0,f.x2)(w,O,e),disableSourceTypeIcon:y&&!q,hasBeenEditedByHuman:q,onEdit:n})});return(0,E.Y)(E.FK,{children:T?J:(0,E.Y)(o.HoverCard,{side:"bottom",content:(0,E.FD)("div",{css:(0,s.AH)({maxWidth:"25rem",display:"flex",flexDirection:"column",overflowWrap:"break-word",wordBreak:"break-word",gap:w.spacing.sm},""),children:[(0,E.FD)("div",{css:(0,s.AH)({display:"flex",flexDirection:"column",gap:w.spacing.xs},""),children:[(0,E.FD)("div",{css:N,children:[(0,E.FD)("div",{css:(0,s.AH)({display:"flex",gap:w.spacing.sm,alignItems:"center"},""),children:[(0,E.Y)(i.T.Title,{css:S,children:B}),(0,E.Y)(R,{iconOnly:L,hideAssessmentName:_,tagContent:$||Q,active:t,icon:X,iconColor:z,textColor:j,sourceIcon:O.isCustomMetric?(0,E.Y)(o.BracketsXIcon,{}):e&&(0,c.w_)(e)?(0,E.Y)(o.UserIcon,{}):(0,E.Y)(o.SparkleDoubleIcon,{}),backgroundColor:(0,f.x2)(w,O,e),disableSourceTypeIcon:y,hasBeenEditedByHuman:q})]}),P&&(0,E.Y)("a",{href:P,target:"_blank",rel:"noreferrer",css:M,children:(0,E.Y)(u.I,{})})]}),b&&(0,E.Y)(i.T.Hint,{children:F.formatMessage({id:"QEL+JO",defaultMessage:"This assessment is the root cause of the overall evaluation failure."})})]}),C&&e&&K&&(0,E.Y)("div",{children:(0,E.Y)(E.FK,{children:(0,E.Y)("span",{css:A,dangerouslySetInnerHTML:{__html:K}})})}),H&&(0,E.Y)("div",{css:(0,s.AH)({display:"flex",flexDirection:"column",gap:w.spacing.xs},""),children:(0,E.Y)("span",{css:(0,s.AH)({color:w.colors.textValidationWarning,fontStyle:"italic"},""),children:H})})]}),trigger:J})})},R=({iconOnly:e,hideAssessmentName:n,tagContent:t,active:r,sourceIcon:a,icon:l,iconColor:u,textColor:d,backgroundColor:c,disableSourceTypeIcon:f,hasBeenEditedByHuman:g,onEdit:m})=>{const{theme:h}=(0,i.u)(),v=e?18:12;return(0,E.FD)("div",{css:(0,s.AH)({display:"inline-flex",height:e?v:20,width:e?v:n?"fit-content":"",justifyContent:"space-between",alignItems:"center",padding:e?"0":m?"0 0 0 8px":"0 8px",gap:h.spacing.sm,borderRadius:e?"50%":h.legacyBorders.borderRadiusMd,backgroundColor:c,boxShadow:`inset 0 0 1px 1px ${r?h.colors.borderAccessible:"transparent"}`,fontSize:h.typography.fontSizeSm,svg:{width:v,height:v},whiteSpace:"nowrap"},""),children:[l,t&&(0,E.Y)("span",{css:(0,s.AH)({color:d},""),children:t}),!0!==f?(0,E.Y)("span",{css:(0,s.AH)({color:u},""),children:a}):(0,E.Y)(E.FK,{}),m&&(0,E.Y)(i.B,{componentId:"mlflow.evaluations_review.edit_assessment_button",onClick:m,size:"small",icon:(0,E.Y)(o.PencilIcon,{css:(0,s.AH)({":hover":{color:h.colors.actionDefaultTextHover}},"")})})]})}},16333:function(e,n,t){t.d(n,{Ld:function(){return r.L},ad:function(){return s.a}});t(37750);var s=t(44072),r=t(38815)},30676:function(e,n,t){t.d(n,{z7:function(){return y},VE:function(){return S}});var s=t(76386),r=t(91215),a=t(49693),i=t(94066),o=t(3491),l=t(20515),u=t(27962),d=t(54921),c=t(94811),f=t(52394),g=t(76118),m=t(73408),E=(t(46709),t(16333)),h=t(74060),v=t(27757);var p={name:"1739oy8",styles:"z-index:1"};function N({tooltipMessage:e,...n}){const t=p;return(0,m.Y)(h.LegacyTooltip,{title:e,children:(0,m.Y)(v.B,{componentId:"codegen_web-shared_src_snippet_actions_snippetactionbutton.tsx_33",...n,css:t})})}function S({copyText:e,onClick:n,...t}){const{actionIcon:s,tooltipMessage:r,copy:a}=(0,E.Ld)(e);return(0,m.Y)(N,{tooltipMessage:r,icon:s,onClick:e=>{a(),null===n||void 0===n||n(e)},...t})}s.A.registerLanguage("sql",d.A),s.A.registerLanguage("java",a.A),s.A.registerLanguage("python",l.A),s.A.registerLanguage("go",r.A),s.A.registerLanguage("javascript",i.A),s.A.registerLanguage("yaml",u.A),s.A.registerLanguage("json",o.A);const M="24px",A={light:f.A,duotoneDark:c.A};function y({theme:e="light",language:n,actions:t,style:r,children:a,showLineNumbers:i,lineNumberStyle:o,wrapLongLines:l,wrapLines:u,PreTag:d}){const c={border:"none",borderRadius:0,margin:0,padding:M,...r};return(0,m.Y)(s.A,{showLineNumbers:i,lineNumberStyle:o,language:n,style:A[e],customStyle:c,codeTagProps:{style:(0,g.pick)(r,"backgroundColor")},wrapLongLines:l,wrapLines:u,PreTag:d,children:a})}},32874:function(e,n,t){t.d(n,{Z:function(){return v}});var s=t(27757),r=t(74060),a=t(46709),i=t(40724),o=t(79081),l=t(66916),u=t(42747),d=t(61077),c=t(39595),f=t(61060),g=t(34599);var m=t(73408);const E=({visible:e,experimentId:n,onCancel:t})=>{const s=(0,u.tz)(),[i,E]=(0,a.useState)(""),[h,v]=(0,a.useState)(""),{createEvaluationDatasetMutation:p,isLoading:N}=(({onSuccess:e,onError:n})=>{const t=(0,c.jE)(),{mutate:s,isLoading:r}=(0,f.n)({mutationFn:async({datasetName:e,experimentIds:n})=>{const t={name:e,experiment_ids:n};return(await(0,d.ff)((0,d.we)("ajax-api/3.0/mlflow/datasets/create"),"POST",t)).dataset},onSuccess:()=>{t.invalidateQueries({queryKey:[g.P4]}),null===e||void 0===e||e()},onError:e=>{null===n||void 0===n||n(e)}});return{createEvaluationDatasetMutation:s,isLoading:r}})({onSuccess:()=>{t()}}),S=(0,a.useCallback)((()=>{i?p({datasetName:i,experimentIds:[n]}):v(s.formatMessage({id:"sbHChH",defaultMessage:"Dataset name is required"}))}),[p,n,i,s]);return(0,m.FD)(o.d,{componentId:"mlflow.create-evaluation-dataset-modal",visible:e,onCancel:t,okText:s.formatMessage({id:"creoEe",defaultMessage:"Create"}),cancelText:s.formatMessage({id:"nEnDEu",defaultMessage:"Cancel"}),onOk:S,okButtonProps:{loading:N,disabled:!i},title:(0,m.Y)(u.sA,{id:"287Ack",defaultMessage:"Create evaluation dataset"}),children:[(0,m.Y)(r.FormUI.Label,{htmlFor:"dataset-name-input",children:(0,m.Y)(u.sA,{id:"xdFMIN",defaultMessage:"Dataset name"})}),(0,m.Y)(l.I,{componentId:"mlflow.create-evaluation-dataset-modal.dataset-name",id:"dataset-name-input",name:"name",type:"text",placeholder:s.formatMessage({id:"ZQpc2w",defaultMessage:"Enter dataset name"}),value:i,onChange:e=>{E(e.target.value),v("")}}),h&&(0,m.Y)(r.FormUI.Message,{type:"error",message:h})]})};var h={name:"b9l38d",styles:"width:min-content"};const v=({experimentId:e})=>{const[n,t]=(0,a.useState)(!1);return(0,m.FD)(m.FK,{children:[(0,m.Y)(s.B,{componentId:"mlflow.eval-datasets.create-dataset-button",css:h,icon:(0,m.Y)(r.DatabaseIcon,{}),onClick:()=>t(!0),children:(0,m.Y)(i.A,{id:"N7BCue",defaultMessage:"Create dataset"})}),(0,m.Y)(E,{experimentId:e,visible:n,onCancel:()=>t(!1)})]})}},34599:function(e,n,t){t.d(n,{P4:function(){return r},lA:function(){return a},uz:function(){return s}});const s="GET_DATASET_RECORDS",r="SEARCH_EVALUATION_DATASETS",a="FETCH_TRACES"},38086:function(e,n,t){t.d(n,{N:function(){return o},v:function(){return i}});var s=t(46709),r=t(73408);const a=s.createContext({makeHTML:e=>e}),i=({children:e,makeHtml:n})=>(0,r.Y)(a.Provider,{value:{makeHTML:n},children:e}),o=()=>s.useContext(a)},42747:function(e,n,t){t.d(n,{sA:function(){return s.sA},tz:function(){return s.tz},zR:function(){return s.zR}});var s=t(77680);t(13584)},44072:function(e,n,t){t.d(n,{a:function(){return o}});t(46709);var s=t(27757),r=t(79081),a=t(38815),i=t(73408);function o({buttonProps:e,componentId:n,copyText:t,copyTooltip:o,isInsideInputGroup:l=!1,onCopy:u,tooltipProps:d}){const{actionIcon:c,copy:f,handleTooltipOpenChange:g,tooltipOpen:m,tooltipMessage:E}=(0,a.L)(t,o,u),h=(0,i.Y)(s.B,{"aria-label":E,componentId:null!==n&&void 0!==n?n:"codegen_web-shared_src_copy_copyactionbutton.tsx_17",icon:c,onClick:f,size:"small",...e}),v=(0,i.Y)(s.B,{"aria-label":E,componentId:null!==n&&void 0!==n?n:"codegen_web-shared_src_copy_copyactionbutton.tsx_17",onClick:f,...e,children:c});return(0,i.Y)(r.T,{componentId:n?`${n}-tooltip`:"codegen_web-shared_src_copy_copyactionbutton.tsx_17-tooltip",content:E,onOpenChange:g,open:m,...d,children:l?v:h})}},52849:function(e,n,t){t.d(n,{v:function(){return r}});var s=t(46709);const r=({isFetching:e,hasNextPage:n,fetchNextPage:t})=>(0,s.useCallback)((s=>{if(s){const{scrollHeight:r,scrollTop:a,clientHeight:i}=s;r-a-i<200&&!e&&n&&t()}}),[t,e,n])},72607:function(e,n,t){t.d(n,{J:function(){return o}});var s=t(96584),r=t(61077),a=t(46709),i=t(34599);const o=({experimentId:e,enabled:n=!0,nameFilter:t=""})=>{const{data:o,fetchNextPage:l,hasNextPage:u,isLoading:d,isFetching:c,refetch:f,error:g}=(0,s.q)({queryKey:[i.P4,e,t],queryFn:async({queryKey:[,e,n],pageParam:t})=>{const s={experiment_ids:[e],filter_string:n?`name ILIKE '%${n}%'`:void 0,order_by:["created_time DESC"],max_results:50,page_token:t};return await(0,r.ff)((0,r.we)("ajax-api/3.0/mlflow/datasets/search"),"POST",s)},cacheTime:0,refetchOnWindowFocus:!1,retry:!1,enabled:n,getNextPageParam:e=>e.next_page_token});return{data:(0,a.useMemo)((()=>{var e;return null!==(e=null===o||void 0===o?void 0:o.pages.flatMap((e=>{var n;return null!==(n=e.datasets)&&void 0!==n?n:[]})))&&void 0!==e?e:[]}),[o]),fetchNextPage:l,hasNextPage:u,isLoading:d,isFetching:c,refetch:f,error:g}}},87879:function(e,n,t){t.d(n,{$h:function(){return l},BM:function(){return u},Mr:function(){return m},Pt:function(){return g},SF:function(){return E},n0:function(){return f},p$:function(){return d},vw:function(){return c}});var s=t(76118),r=t(42747),a=t(90081),i=t(73408);const o=1;function l(e,n=o){return Number((100*e).toFixed(n)).toString()}function u(e,n=3){if((0,s.isNil)(e))return"null";const t=Math.pow(10,n);return(Math.round(e*t)/t).toString()}function d(e,n,t){if("numeric"===n.dtype){const e=t.currentNumericValues,n=t.otherNumericValues;let s=NaN,r=NaN;e&&(s=e.reduce(((e,n)=>e+n),0)/e.length),n&&(r=n.reduce(((e,n)=>e+n),0)/n.length);const a=n?s-r:void 0,i=a?a>0?"up":"down":"none";return{displayScore:u(s,2),displayScoreChange:a?"up"===i?`+${u(Math.abs(a),2)}`:"down"===i?`-${u(Math.abs(a),2)}`:"+0":void 0,changeDirection:i,aggregateType:"average"}}if("pass-fail"===n.dtype||"boolean"===n.dtype){const e=0,s=(0,a.jU)(n,t.currentCounts),r=l(s,e)+"%",i=t.otherCounts?s-(0,a.jU)(n,t.otherCounts):void 0,o=i?i>0?"up":"down":"none";return{displayScore:r,displayScoreChange:i?("up"===o||"none"===o?"+":"")+l(i,e)+"%":void 0,changeDirection:o,aggregateType:"percentage-true"}}if("string"===n.dtype){const t=n.uniqueValues.size;return{displayScore:1!==t?e.formatMessage({id:"+dbgRR",defaultMessage:"{numUniqueValues} values"},{numUniqueValues:t}):e.formatMessage({id:"lKyc9r",defaultMessage:"1 value"}),displayScoreChange:"",changeDirection:"none",aggregateType:"categorical"}}return{displayScore:"N/A",displayScoreChange:"N/A",changeDirection:"none",aggregateType:"categorical"}}function c(e,n){return l(n,0)+"%"}function f(e,n,t=!0){if("numeric"===e.dtype){return"up"===(n>0?"up":"down")?`+${u(n,2)}`:`-${u(n,2)}`}{const e=n>=0?"up":"down";return t?"up"===e?`+${l(n,0)}%`:`-${l(-1*n,0)}%`:"up"===e?`+${n}`:`-${n}`}}function g(e,n=new Date){const t=Math.max(0,Math.floor((n-e)/1e3));let s=Math.floor(t/31536e3);return s>=1?(0,i.Y)(r.sA,{id:"16BvfJ",defaultMessage:"{timeSince, plural, =1 {1 year} other {# years}} ago",values:{timeSince:s}}):(s=Math.floor(t/2592e3),s>=1?(0,i.Y)(r.sA,{id:"5ZAXeS",defaultMessage:"{timeSince, plural, =1 {1 month} other {# months}} ago",values:{timeSince:s}}):(s=Math.floor(t/86400),s>=1?(0,i.Y)(r.sA,{id:"tLb7+M",defaultMessage:"{timeSince, plural, =1 {1 day} other {# days}} ago",values:{timeSince:s}}):(s=Math.floor(t/3600),s>=1?(0,i.Y)(r.sA,{id:"aOW396",defaultMessage:"{timeSince, plural, =1 {1 hour} other {# hours}} ago",values:{timeSince:s}}):(s=Math.floor(t/60),s>=1?(0,i.Y)(r.sA,{id:"7jsqqe",defaultMessage:"{timeSince, plural, =1 {1 minute} other {# minutes}} ago",values:{timeSince:s}}):(0,i.Y)(r.sA,{id:"93iLUV",defaultMessage:"{timeSince, plural, =1 {1 second} other {# seconds}} ago",values:{timeSince:t}})))))}function m(e){return e.replace(/([!"#$%&'()*+,\.\/:;\s<=>?@[\\\]^`{|}~])/g,"\\$1")}function E(e,n){return function(e,n,t=[],s){let r=Number(e);if(isNaN(r)||!isFinite(r))return{value:"",numericValue:void 0,unit:"",divisor:1};let a=0,i=1;for(;r>=n&&a<t.length-1;)r/=n,i*=n,a+=1;return{value:h(r,s),numericValue:r,unit:t[a],divisor:i}}(e,1024,["bytes","KB","MB","GB","TB","PB"],n)}function h(e,n=3){return Math.round(e)!==e?e.toFixed(n):e.toString()}},90081:function(e,n,t){t.d(n,{II:function(){return c},J:function(){return o},SA:function(){return M},Yl:function(){return y},aE:function(){return f},jU:function(){return p},pY:function(){return v}});var s=t(76118),r=t(9858),a=t(10708),i=t(90448);const o="Error";function l(e){return Boolean((null===e||void 0===e?void 0:e.errorCode)||(null===e||void 0===e?void 0:e.errorMessage))}function u(e){const n=e.split("/");return 1===n.length?{metricName:e,assessmentName:e}:2===n.length?{metricName:n[0],assessmentName:n[1]}:{metricName:n[1],assessmentName:n.slice(2).join("/")}}const d=[i.gZ.YES,i.gZ.NO];function c(e,n,t){var r;const a={},o={[i._1.OVERALL_ASSESSMENT]:"pass-fail"},c=new Set;[...n,...t||[]].forEach((e=>{var n;const t=Object.entries(e.responseAssessmentsByName||{}),r=e.overallAssessments.map((e=>[i._1.OVERALL_ASSESSMENT,[e]])),a=[];null===(n=e.retrievalChunks)||void 0===n||n.forEach((e=>{for(const[n,t]of Object.entries(e.retrievalAssessmentsByName||{}))a.push([n,t])}));for(const[u,f]of[...t,...r,...a]){c.add(u);const e=f[0];let n=(0,s.isNil)(e.stringValue)?(0,s.isNil)(e.numericValue)?(0,s.isNil)(e.booleanValue)?void 0:"boolean":"numeric":"pass-fail";l(e)&&(n=void 0),o[u]||(u in i.c9&&(n="pass-fail"),o[u]=n),"pass-fail"!==n||(0,s.isNil)(e.stringValue)||d.includes(e.stringValue)||(o[u]="string"),void 0!==n&&n!==o[u]&&(o[u]="string")}}));for(const s of c)o[s]||(o[s]="unknown");[...n,...t||[]].forEach((n=>{var t;const r=Object.entries(n.responseAssessmentsByName||{}),d=n.overallAssessments.map((e=>[i._1.OVERALL_ASSESSMENT,[e]])),c=[];null===(t=n.retrievalChunks)||void 0===t||t.forEach((e=>{for(const[n,t]of Object.entries(e.retrievalAssessmentsByName||{}))c.push([n,t])}));const f=Object.keys(o);for(const N of f){const n=[...r.filter((([e])=>e===N)),...d.filter((([e])=>e===N)),...c.filter((([e])=>e===N))].map((([e,n])=>n[0]))[0],t=l(n);if((0,s.isNil)(a[N])){var g,m,E;let s,r,l=!1;const d=void 0!==i.c9[N];if(d)s=e.formatMessage(i.c9[N]),r=N,l=!1;else{var h;const{metricName:e,assessmentName:t}=u(N);s=t||"-",r=e,"CODE"===(null===n||void 0===n||null===(h=n.source)||void 0===h?void 0:h.sourceType)&&(l=!0)}const f=o[N]||"string",v=(0,i.FN)(i.pZ[N]),p=N in i.jr?e.formatMessage(i.jr[N]):"",S=N in i.mS?e.formatMessage(i.mS[N]):"HUMAN"===(null===n||void 0===n||null===(g=n.source)||void 0===g?void 0:g.sourceType)?e.formatMessage({id:"z94r4F",defaultMessage:"This assessment is produced by a human judge."}):e.formatMessage({id:"lQ2nDn",defaultMessage:"This assessment is produced by a custom metric."});let M=n?(0,i.Zh)(n):void 0;null===M&&(M=void 0);const A=new Set;t||A.add(M),a[N]={name:N,displayName:s,isKnown:d,metricName:r,isCustomMetric:l,source:null===n||void 0===n?void 0:n.source,dtype:f,uniqueValues:A,isOverall:N===i._1.OVERALL_ASSESSMENT,docsLink:v,missingTooltip:p,description:S,isEditable:"AI_JUDGE"===(null===n||void 0===n||null===(m=n.source)||void 0===m?void 0:m.sourceType)||"HUMAN"===(null===n||void 0===n||null===(E=n.source)||void 0===E?void 0:E.sourceType),isRetrievalAssessment:c.some((([e])=>e===N)),containsErrors:t}}else{const e=a[N];let r=n?(0,i.Zh)(n):void 0;var v,p;if((0,s.isNil)(r)&&(r=void 0),t||e.uniqueValues.add(r),!e.isEditable)e.isEditable="AI_JUDGE"===(null===n||void 0===n||null===(v=n.source)||void 0===v?void 0:v.sourceType)||"HUMAN"===(null===n||void 0===n||null===(p=n.source)||void 0===p?void 0:p.sourceType);e.isRetrievalAssessment=e.isRetrievalAssessment||c.some((([e])=>e===N)),e.containsErrors=e.containsErrors||t}}}));const g=(null===(r=a[i._1.OVERALL_ASSESSMENT])||void 0===r?void 0:r.uniqueValues)||new Set;return g.has(i.gZ.YES)||g.has(i.gZ.NO)||delete a[i._1.OVERALL_ASSESSMENT],f(Object.values(a))}function f(e){return e.sort(((e,n)=>{const t=i.kp.indexOf(e.name),s=i.kp.indexOf(n.name);return-1!==t&&-1!==s?t-s:-1!==t?-1:-1!==s?1:e.name.localeCompare(n.name)}))}function g(e,n){if("numeric"!==e.dtype)return;return function(e){if(0===e.length)return;const n=[],t=Math.min(...e),s=Math.max(...e),r=Math.max(.01,(s-t)/10);let a=0;if(t===s)n.push({lower:t,upper:s,count:e.length});else for(let i=t;i<s;i+=r)n.push({lower:i,upper:Math.min(i+r,s),count:0});n.sort(((e,n)=>e.lower-n.lower));for(const i of e){const e=n.find((e=>i>=e.lower&&(i<e.upper||i===e.upper&&i===s)));e&&(e.count++,a=Math.max(a,e.count))}return{min:t,max:s,maxCount:a,counts:n}}(n.flatMap((n=>{const t=e.isOverall?n.overallAssessments:n.responseAssessmentsByName[e.name];return null===t||void 0===t?void 0:t.map((e=>(0,i.Zh)(e))).filter((e=>void 0!==e&&"number"===typeof e))})).filter((e=>!(0,s.isNil)(e))))}function m(e,n){if("numeric"===e.dtype)return;const t=new Map;return n.forEach((n=>{const s=e.isOverall?n.overallAssessments:n.responseAssessmentsByName[e.name],r=s&&s.length>0?y(e,s):[{value:void 0,count:1}],a=e.containsErrors?[o,...e.uniqueValues]:e.uniqueValues;for(const e of a){const n=r.find((n=>n.value===e)),s=n?n.count:0;t.set(e,(t.get(e)||0)+s)}})),t}function E(e,n){if("numeric"!==e.dtype)return;const t=[];return n.forEach((n=>{const r=e.isOverall?(0,s.first)(n.overallAssessments):(0,s.first)(n.responseAssessmentsByName[e.name]);if(r){const e=(0,i.Zh)(r);(0,s.isNil)(e)||t.push(Number(e))}})),t}function h(e,n){let t=0;return n.forEach((n=>{var r;if((0,s.isNil)(n))return;const a=(0,s.first)(n.overallAssessments);(null===a||void 0===a||null===(r=a.rootCauseAssessment)||void 0===r?void 0:r.assessmentName)===e.name&&t++})),t}function v(e,n,t){const r=n.map((e=>e.currentRunValue)).filter((e=>!(0,s.isNil)(e))),a=n.map((e=>e.otherRunValue)).filter((e=>!(0,s.isNil)(e))),i=m(e,r),o=m(e,a),l=g(e,r),u=t.filter((n=>n.assessmentName===e.name));return{assessmentInfo:e,currentCounts:i,otherCounts:o,currentNumericValues:E(e,r),otherNumericValues:E(e,a),currentNumericAggregate:l,currentNumRootCause:h(e,r),otherNumRootCause:h(e,a),assessmentFilters:u}}function p(e,n=new Map){if("pass-fail"===e.dtype||"boolean"===e.dtype){let t=0,r=0;for(const[i,l]of n)(0,a.g)(e,i)&&(r+=l),(0,s.isNil)(i)||i===o||(t+=l);return t>0?r/t:0}return 0}function N(e,n,t,s,r,a,i){let l=0;const u=s===o||void 0===s;for(const[f,g]of r)void 0!==f&&f!==o&&(l+=g);const d=r.get(s)||0,c=!u&&l>0?d/l:0;return{value:r.get(s)||0,fraction:c,isSelected:t.some((e=>e.filterValue===s&&e.assessmentName===n.name&&e.run===a)),toggleFilter:()=>i(n.name,s,a,undefined),tooltip:u?e.formatMessage({id:"joh88n",defaultMessage:'{numValue} for run "{runName}"'},{numValue:d,runName:a}):e.formatMessage({id:"jjidVr",defaultMessage:'{numValue}/{numEvals} for run "{runName}"'},{numValue:d,numEvals:l,runName:a})}}function S(e){const n=function(e){const n=Array.from(e.uniqueValues);if("pass-fail"===e.dtype){n.includes(i.gZ.YES)||n.push(i.gZ.YES),n.includes(i.gZ.NO)||n.push(i.gZ.NO);const e=[i.gZ.YES,i.gZ.NO];return n.sort(((n,t)=>e.indexOf(n)-e.indexOf(t)))}if("boolean"===e.dtype)return n.sort(((e,n)=>!0===e?-1:1));return n.sort()}(e);return e.containsErrors&&n.push(o),n}function M(e,n,t,s,a,i,l,u){const d=void 0!==i.otherCounts,c=[];for(const f of S(t)){const g=i.currentCounts?N(e,t,s,f,i.currentCounts,l||"monitor",a):void 0,m=d&&u?N(e,t,s,f,i.otherCounts||new Map,u,a):void 0,E=f===o||void 0===f,h=d&&g&&m?E?g.value-((null===m||void 0===m?void 0:m.value)||0):g.fraction-((null===m||void 0===m?void 0:m.fraction)||0):void 0;g&&(!E||0!==g.value||h&&0!==h)&&c.push({name:A(e,n,t,f),current:g,other:m,backgroundColor:(0,r.QO)(n,t,f,f===o),scoreChange:h})}return c}function A(e,n,t,r){return"pass-fail"===t.dtype?r===i.gZ.YES?e.formatMessage({id:"nDVJ/n",defaultMessage:"Pass"}):r===i.gZ.NO?e.formatMessage({id:"7Dhfxy",defaultMessage:"Fail"}):r===o?e.formatMessage({id:"gPWxlB",defaultMessage:"Error"}):e.formatMessage({id:"keSIQ4",defaultMessage:"null"}):"boolean"===t.dtype?!0===r?e.formatMessage({id:"1Ujhc3",defaultMessage:"True"}):!1===r?e.formatMessage({id:"nvjkTA",defaultMessage:"False"}):e.formatMessage({id:"keSIQ4",defaultMessage:"null"}):(0,s.isNil)(r)?"null":`${r}`}function y(e,n){const t=n.filter((n=>n.name===e.name));let s=new Set;for(const o of t){const e=(0,i.Zh)(o);s.add(e)}t.sort(((e,n)=>(n.timestamp||0)-(e.timestamp||0)));const r=t.filter((e=>l(e))),a=t.filter((e=>!l(e)));s=new Set;for(const o of a){const e=(0,i.Zh)(o);s.add(e)}const u=[];for(const o of s){const e=t.filter((e=>(0,i.Zh)(e)===o)),n=e.length;u.push({value:o,count:n,latestAssessment:e[0]})}return r.length>0&&u.push({value:o,count:r.length,latestAssessment:r[0]}),u}},90448:function(e,n,t){t.d(n,{Au:function(){return M},CH:function(){return U},ER:function(){return D},FN:function(){return m},II:function(){return b},PB:function(){return x},Pp:function(){return H},Qq:function(){return L},UN:function(){return S},Wp:function(){return Z},Xe:function(){return k},YZ:function(){return F},Zh:function(){return O},_1:function(){return f},aj:function(){return V},bz:function(){return p},c9:function(){return A},eB:function(){return N},fu:function(){return Y},gZ:function(){return h},hG:function(){return T},ik:function(){return w},jr:function(){return y},kp:function(){return g},mS:function(){return R},ng:function(){return G},pZ:function(){return E},rU:function(){return B},sw:function(){return _},uU:function(){return v},vP:function(){return z},w_:function(){return j},xO:function(){return P},yQ:function(){return C}});var s=t(68248),r=t(76118),a=t(74060),i=t(27757),o=t(42747),l=t(44666),u=t(9858),d=t(73408);const c="messages";let f=function(e){return e.OVERALL_ASSESSMENT="overall_assessment",e.SAFETY="safety",e.GROUNDEDNESS="groundedness",e.RETRIEVAL_GROUNDEDNESS="retrieval_groundedness",e.CORRECTNESS="correctness",e.RELEVANCE_TO_QUERY="relevance_to_query",e.CHUNK_RELEVANCE="chunk_relevance",e.RETRIEVAL_RELEVANCE="retrieval_relevance",e.CONTEXT_SUFFICIENCY="context_sufficiency",e.RETRIEVAL_SUFFICIENCY="retrieval_sufficiency",e.GUIDELINE_ADHERENCE="guideline_adherence",e.GUIDELINES="guidelines",e.GLOBAL_GUIDELINE_ADHERENCE="global_guideline_adherence",e}({});const g=[f.OVERALL_ASSESSMENT,f.CORRECTNESS,f.GLOBAL_GUIDELINE_ADHERENCE,f.GUIDELINE_ADHERENCE,f.GUIDELINES,f.RELEVANCE_TO_QUERY,f.CONTEXT_SUFFICIENCY,f.RETRIEVAL_SUFFICIENCY,f.CHUNK_RELEVANCE,f.RETRIEVAL_RELEVANCE,f.GROUNDEDNESS,f.RETRIEVAL_GROUNDEDNESS,f.SAFETY],m=e=>"https://mlflow.org/docs/latest/genai/eval-monitor/scorers/llm-judge/",E={[f.OVERALL_ASSESSMENT]:{basePath:"/generative-ai/agent-evaluation/llm-judge-metrics",hash:"how-quality-is-assessed-by-llm-judges"},[f.CORRECTNESS]:{basePath:"/generative-ai/agent-evaluation/llm-judge-reference",hash:"correctness"},[f.GROUNDEDNESS]:{basePath:"/generative-ai/agent-evaluation/llm-judge-reference",hash:"groundedness"},[f.RETRIEVAL_GROUNDEDNESS]:{basePath:"/generative-ai/agent-evaluation/llm-judge-reference",hash:"groundedness"},[f.RELEVANCE_TO_QUERY]:{basePath:"/generative-ai/agent-evaluation/llm-judge-reference",hash:"answer-relevance"},[f.SAFETY]:{basePath:"/generative-ai/agent-evaluation/llm-judge-reference",hash:"safety"},[f.CHUNK_RELEVANCE]:{basePath:"/generative-ai/agent-evaluation/llm-judge-reference",hash:"chunk-relevance-precision"},[f.RETRIEVAL_RELEVANCE]:{basePath:"/generative-ai/agent-evaluation/llm-judge-reference",hash:"chunk-relevance-precision"},[f.CONTEXT_SUFFICIENCY]:{basePath:"/generative-ai/agent-evaluation/llm-judge-reference",hash:"context-sufficiency"},[f.RETRIEVAL_SUFFICIENCY]:{basePath:"/generative-ai/agent-evaluation/llm-judge-reference",hash:"context-sufficiency"},[f.GUIDELINE_ADHERENCE]:{basePath:"/generative-ai/agent-evaluation/llm-judge-reference",hash:"guideline-adherence"},[f.GUIDELINES]:{basePath:"/generative-ai/agent-evaluation/llm-judge-reference",hash:"guideline-adherence"}};let h=function(e){return e.YES="yes",e.NO="no",e.UNKNOWN="unknown",e}({});function v(e,n,t,r){return"pass-fail"===t.dtype?r===h.YES?{content:e.formatMessage({id:"pm1RNL",defaultMessage:"Pass"}),icon:(0,d.Y)("span",{css:(0,s.AH)({color:`${(0,u.CY)(n,t,{stringValue:h.YES})} !important`,svg:{width:"12px",height:"12px"}},""),children:(0,d.Y)(a.CheckCircleIcon,{css:(0,s.AH)({backgroundColor:(0,u.x2)(n,t,{stringValue:h.YES}),borderRadius:"50%"},"")})})}:r===h.NO?{content:e.formatMessage({id:"9cTaBs",defaultMessage:"Fail"}),icon:(0,d.Y)("span",{css:(0,s.AH)({color:`${(0,u.CY)(n,t,{stringValue:h.NO})} !important`,svg:{width:"12px",height:"12px"}},""),children:(0,d.Y)(a.XCircleIcon,{css:(0,s.AH)({backgroundColor:(0,u.x2)(n,t,{stringValue:h.NO}),borderRadius:"50%"},"")})})}:{content:e.formatMessage({id:"27XMby",defaultMessage:"Missing"}),icon:(0,d.Y)("span",{css:(0,s.AH)({color:`${(0,u.CY)(n,t,{stringValue:h.UNKNOWN})} !important`,svg:{width:"12px",height:"12px"}},""),children:(0,d.Y)(i.W,{css:(0,s.AH)({backgroundColor:(0,u.x2)(n,t,{stringValue:h.UNKNOWN}),borderRadius:"50%"},"")})})}:"boolean"===t.dtype?!0===r?{content:e.formatMessage({id:"1Ujhc3",defaultMessage:"True"})}:!1===r?{content:e.formatMessage({id:"nvjkTA",defaultMessage:"False"})}:{content:e.formatMessage({id:"keSIQ4",defaultMessage:"null"})}:{content:`${r}`}}let p=function(e){return e.IS_OVERALL_ASSESSMENT="is_overall_assessment",e.CHUNK_INDEX="chunk_index",e.IS_COPIED_FROM_AI="is_copied_from_ai",e}({});const N={response:(0,o.zR)({id:"WiaEQ3",defaultMessage:"Model output"})},S="expected_facts",M={expected_response:(0,o.zR)({id:"CX8ytv",defaultMessage:"Expected output"}),[S]:(0,o.zR)({id:"N1G2a5",defaultMessage:"Expected facts"})},A={[f.OVERALL_ASSESSMENT]:(0,o.zR)({id:"uoJWOm",defaultMessage:"Overall"}),[f.CORRECTNESS]:(0,o.zR)({id:"7+XQ3q",defaultMessage:"Correctness"}),[f.GROUNDEDNESS]:(0,o.zR)({id:"Ws58cc",defaultMessage:"Groundedness"}),[f.RETRIEVAL_GROUNDEDNESS]:(0,o.zR)({id:"wY58OE",defaultMessage:"Retrieval groundedness"}),[f.CONTEXT_SUFFICIENCY]:(0,o.zR)({id:"GRaplV",defaultMessage:"Context sufficiency"}),[f.RETRIEVAL_SUFFICIENCY]:(0,o.zR)({id:"mdzFsD",defaultMessage:"Retrieval sufficiency"}),[f.RELEVANCE_TO_QUERY]:(0,o.zR)({id:"Yhydp3",defaultMessage:"Relevance"}),[f.SAFETY]:(0,o.zR)({id:"jMUqD1",defaultMessage:"Safety"}),[f.CHUNK_RELEVANCE]:(0,o.zR)({id:"qnMgLj",defaultMessage:"Chunk relevance"}),[f.RETRIEVAL_RELEVANCE]:(0,o.zR)({id:"opUoF8",defaultMessage:"Retrieval relevance"}),[f.GUIDELINE_ADHERENCE]:(0,o.zR)({id:"xV6NWF",defaultMessage:"Guideline adherence"}),[f.GUIDELINES]:(0,o.zR)({id:"ls3868",defaultMessage:"Guidelines"}),[f.GLOBAL_GUIDELINE_ADHERENCE]:(0,o.zR)({id:"tUAhDM",defaultMessage:"Global guideline adherence"})},y={[f.CORRECTNESS]:(0,o.zR)({id:"i7UTwK",defaultMessage:"Correctness assessment is missing. This is likely because you have not provided an expected response (ground truth) or grading notes."}),[f.GROUNDEDNESS]:(0,o.zR)({id:"jPW0Lj",defaultMessage:"Groundedness assessment is missing. This is likely because your agent is not returning retrieved_context."}),[f.RETRIEVAL_GROUNDEDNESS]:(0,o.zR)({id:"TXPJuE",defaultMessage:"Retrieval Groundedness assessment is missing. This is likely because your agent is not returning retrieved_context."}),[f.CONTEXT_SUFFICIENCY]:(0,o.zR)({id:"g0tloS",defaultMessage:"Context sufficiency assessment is missing. This is likely because your agent is not returning retrieved_context."}),[f.RETRIEVAL_SUFFICIENCY]:(0,o.zR)({id:"ffIouW",defaultMessage:"Retrieval sufficiency assessment is missing. This is likely because your agent is not returning retrieved_context."})},R={[f.OVERALL_ASSESSMENT]:(0,o.zR)({id:"hW5ehW",defaultMessage:"The overall assessment passes when all of the judges pass."}),[f.CORRECTNESS]:(0,o.zR)({id:"Y6gWro",defaultMessage:"The correctness LLM judge gives a binary evaluation and written rationale on whether the agent's generated response is factually accurate and semantically similar to the provided ground-truth response or grading notes."}),[f.GROUNDEDNESS]:(0,o.zR)({id:"+Wd9fs",defaultMessage:"The groundedness LLM judge returns a binary evaluation and written rationale on whether the generated response is factually consistent with the agent's retrieved context."}),[f.RETRIEVAL_GROUNDEDNESS]:(0,o.zR)({id:"6Q/0BO",defaultMessage:"The retrieval groundedness LLM judge returns a binary evaluation and written rationale on whether the generated response is factually consistent with the agent's retrieved context."}),[f.RELEVANCE_TO_QUERY]:(0,o.zR)({id:"oDwj2g",defaultMessage:"The relevance_to_query LLM judge determines whether the response is relevant to the input request."}),[f.SAFETY]:(0,o.zR)({id:"/gqx4n",defaultMessage:"The safety LLM judge returns a binary rating and a written rationale on whether the generated response has harmful or toxic content."}),[f.CHUNK_RELEVANCE]:(0,o.zR)({id:"aUOkOC",defaultMessage:"The chunk-relevance-precision LLM judge determines whether the chunks returned by the retriever are relevant to the input request. Precision is calculated as the number of relevant chunks returned divided by the total number of chunks returned. For example, if the retriever returns four chunks, and the LLM judge determines that three of the four returned documents are relevant to the request, then llm_judged/chunk_relevance/precision is 0.75."}),[f.RETRIEVAL_RELEVANCE]:(0,o.zR)({id:"rBydei",defaultMessage:"The retrieval-relevance LLM judge determines whether the chunks returned by the retriever are relevant to the input request. Precision is calculated as the number of relevant chunks returned divided by the total number of chunks returned. For example, if the retriever returns four chunks, and the LLM judge determines that three of the four returned documents are relevant to the request, then llm_judged/chunk_relevance/precision is 0.75."}),[f.CONTEXT_SUFFICIENCY]:(0,o.zR)({id:"bkWot5",defaultMessage:"The context sufficiency LLM judge determines whether the retrieved context is sufficient to generate the expected response."}),[f.RETRIEVAL_SUFFICIENCY]:(0,o.zR)({id:"fwxkdN",defaultMessage:"The retrieval sufficiency LLM judge determines whether the retrieved context is sufficient to generate the expected response."}),[f.GUIDELINE_ADHERENCE]:(0,o.zR)({id:"4Tg5Vr",defaultMessage:"The guideline adherence LLM judge determines whether the response adheres to the guidelines provided."}),[f.GUIDELINES]:(0,o.zR)({id:"98v9a0",defaultMessage:"The guidelines LLM judge determines whether the response adheres to the guidelines provided. All responses must adhere to guidelines."}),[f.GLOBAL_GUIDELINE_ADHERENCE]:(0,o.zR)({id:"zZ9sIi",defaultMessage:"The global guideline adherence LLM judge determines whether the response adheres to the global guidelines provided. All responses must adhere to global guidelines."})},C={[f.OVERALL_ASSESSMENT]:{[h.YES]:(0,o.zR)({id:"Za9+Cg",defaultMessage:"Pass"}),[h.NO]:(0,o.zR)({id:"j77+aP",defaultMessage:"Fail"})},[f.CHUNK_RELEVANCE]:{[h.YES]:(0,o.zR)({id:"B1Upnc",defaultMessage:"Relevant"}),[h.NO]:(0,o.zR)({id:"M+HfWb",defaultMessage:"Irrelevant"})},[f.RETRIEVAL_RELEVANCE]:{[h.YES]:(0,o.zR)({id:"++039K",defaultMessage:"Relevant"}),[h.NO]:(0,o.zR)({id:"akmaST",defaultMessage:"Irrelevant"})},[f.CONTEXT_SUFFICIENCY]:{[h.YES]:(0,o.zR)({id:"7S/ozs",defaultMessage:"Context sufficient"}),[h.NO]:(0,o.zR)({id:"aAAHaS",defaultMessage:"Context insufficient"})},[f.RETRIEVAL_SUFFICIENCY]:{[h.YES]:(0,o.zR)({id:"rBIGDf",defaultMessage:"Sufficient"}),[h.NO]:(0,o.zR)({id:"lhFnAG",defaultMessage:"Insufficient"})},[f.RELEVANCE_TO_QUERY]:{[h.YES]:(0,o.zR)({id:"rNkAcB",defaultMessage:"Relevant"}),[h.NO]:(0,o.zR)({id:"0M7VVC",defaultMessage:"Irrelevant"})},[f.GROUNDEDNESS]:{[h.YES]:(0,o.zR)({id:"/2InJv",defaultMessage:"Grounded"}),[h.NO]:(0,o.zR)({id:"ZfsnMj",defaultMessage:"Not grounded"})},[f.RETRIEVAL_GROUNDEDNESS]:{[h.YES]:(0,o.zR)({id:"e515YD",defaultMessage:"Grounded"}),[h.NO]:(0,o.zR)({id:"uSVfB9",defaultMessage:"Not grounded"})},[f.CORRECTNESS]:{[h.YES]:(0,o.zR)({id:"eSxQmg",defaultMessage:"Correct"}),[h.NO]:(0,o.zR)({id:"LhxSrc",defaultMessage:"Incorrect"})},[f.SAFETY]:{[h.YES]:(0,o.zR)({id:"DMOaoR",defaultMessage:"Safe"}),[h.NO]:(0,o.zR)({id:"CX/MSu",defaultMessage:"Unsafe"})},[f.GUIDELINE_ADHERENCE]:{[h.YES]:(0,o.zR)({id:"ZNYFUr",defaultMessage:"Adheres to guidelines"}),[h.NO]:(0,o.zR)({id:"hIBLi9",defaultMessage:"Violates guidelines"})},[f.GUIDELINES]:{[h.YES]:(0,o.zR)({id:"luV/3W",defaultMessage:"Adheres to guidelines"}),[h.NO]:(0,o.zR)({id:"WmgIQ+",defaultMessage:"Violates guidelines"})},[f.GLOBAL_GUIDELINE_ADHERENCE]:{[h.YES]:(0,o.zR)({id:"mtYPI8",defaultMessage:"Adheres to global guidelines"}),[h.NO]:(0,o.zR)({id:"rZyNgx",defaultMessage:"Violates global guidelines"})}},I=e=>{var n;return"AI_JUDGE"===(null===e||void 0===e||null===(n=e.source)||void 0===n?void 0:n.sourceType)},_=e=>{let n=L(e,"request");return(0,r.isNil)(n)&&(n=L(e,c)),(0,r.isNil)(n)&&!(0,r.isNil)(e.inputs)&&Object.keys(e.inputs).length>0&&(n=G(e.inputs)),((0,r.isNil)(n)||""===n)&&(n=e.evaluationId),n},L=(e,n)=>{var t,s;if(!(0,r.isNil)(e.inputsTitle))return"string"===typeof e.inputsTitle?e.inputsTitle:JSON.stringify(e.inputsTitle);let a;const i=e.inputs[n];var o;if((0,r.isPlainObject)(i)&&!(0,r.isNil)(i[c])&&Array.isArray(i[c])&&!(0,r.isNil)(null===(t=i[c][0])||void 0===t?void 0:t.content))a=null===(o=i[c][i[c].length-1])||void 0===o?void 0:o.content;else if((0,r.isNil)(i)||!Array.isArray(i)||(0,r.isNil)(null===(s=i[0])||void 0===s?void 0:s.content))a=i?G(i):void 0;else{var l;a=null===(l=i[i.length-1])||void 0===l?void 0:l.content}return a},T=e=>{var n;return!0===(null===(n=e.metadata)||void 0===n?void 0:n[p.IS_OVERALL_ASSESSMENT])},b=e=>{var n;return(0,r.isNumber)(null===(n=e.metadata)||void 0===n?void 0:n[p.CHUNK_INDEX])},O=e=>{var n,t;const s=null!==(n=null!==(t=e.stringValue)&&void 0!==t?t:e.numericValue)&&void 0!==n?n:e.booleanValue;if(!(0,r.isNil)(s))return s};function Y(e,n){let t=e;const s=t.startsWith("#");s&&(t=e.slice(1));return`${s?"#":""}${t}${Math.round(255*Math.min(Math.max(n,0),1)).toString(16).toUpperCase()}`}const x=[f.GUIDELINE_ADHERENCE,f.GUIDELINES,f.GLOBAL_GUIDELINE_ADHERENCE,f.RELEVANCE_TO_QUERY,f.CONTEXT_SUFFICIENCY,f.RETRIEVAL_SUFFICIENCY,f.CORRECTNESS,f.GROUNDEDNESS,f.RETRIEVAL_GROUNDEDNESS,f.SAFETY],D=[f.CHUNK_RELEVANCE],V=({name:e,isOverallAssessment:n,value:t,rationale:s,metadata:r={}})=>{var a;const i=null!==(a=(0,l.w)())&&void 0!==a?a:"";return{booleanValue:"boolean"===typeof t?t:null,numericValue:null,stringValue:"boolean"!==typeof t?t:null,name:e,metadata:n?{...r,[p.IS_OVERALL_ASSESSMENT]:!0}:r,rationale:null!==s&&void 0!==s?s:null,source:{sourceId:i,sourceType:"HUMAN",metadata:{}},timestamp:Date.now(),isDraft:!0}},w=(e,n)=>e.overallAssessments.length>0&&e.overallAssessments.every(I)&&!n.some(T),F=e=>{var n;const t=e.overallAssessments.find(I);if(!t)return null;const s=null!==(n=(0,l.w)())&&void 0!==n?n:"";return{...t,timestamp:Date.now(),isDraft:!0,source:{sourceType:"HUMAN",sourceId:s,metadata:{}},metadata:{...t.metadata,[p.IS_COPIED_FROM_AI]:!0}}},U=e=>"isDraft"in e&&e.isDraft,k=e=>(0,r.orderBy)(Object.entries(e),(([e,n],t)=>{const s=g.indexOf(e);return-1!==s?s:null!==(r=null===(a=n[n.length-1])||void 0===a?void 0:a.timestamp)&&void 0!==r?r:t;var r,a})),z=e=>{var n,t;return null!==(n=null===(t=e.overallAssessments)||void 0===t?void 0:t.filter((e=>!U(e))).some((e=>!I(e))))&&void 0!==n&&n},j=e=>{var n,t;return"HUMAN"===(null===(n=e.source)||void 0===n?void 0:n.sourceType)&&!(null!==(t=e.metadata)&&void 0!==t&&t[p.IS_COPIED_FROM_AI])},H=e=>{var n;return null===(n=e.metadata)||void 0===n?void 0:n[p.CHUNK_INDEX]},G=e=>(0,r.isPlainObject)(e)||Array.isArray(e)?JSON.stringify(e,void 0,2):e,B=(e,n,t,s)=>{if(n){const t=C[n.name];return t?Object.entries(t).map((([t,s])=>({key:t,label:e.formatMessage(s),rootAssessmentName:n.name}))):[]}return(s||[]).filter((e=>"boolean"===e.dtype)).map((e=>({key:e.name,label:e.name,rootAssessmentName:e.name,disabled:null===t||void 0===t?void 0:t.some((n=>n.name===e.name))})))},P=e=>{if(e){const n=Boolean(e.rationale),t=!(0,r.isNil)(O(e)),s=Boolean(e.errorMessage);return!(n||t||s)}return!1},Z=e=>Array.isArray(e)&&e.every((e=>(0,r.isPlainObject)(e)&&"doc_uri"in e&&"content"in e))}}]);