"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[5528],{17763:function(e,t,r){r.d(t,{P:function(){return a}});r(46709);var n=r(50383),o=r(73408);const a=({value:e})=>{const t=new Date(Number(e));return isNaN(t)?null:(0,o.Y)(n.f,{date:t})}},19816:function(e,t,r){r.d(t,{u:function(){return g},g:function(){return p}});var n=r(76118),o=r(46709),a=r(56530),i=r(5690),s=r(99213),l=r(16389);var d=r(99002),u=r(31655),c=r(27206);const m=({queryResult:e,runUuid:t})=>{const{registeredModels:r}=(0,a.d4)((({entities:e})=>({registeredModels:e.modelVersionsByRunUuid[t]})));if((0,u._O)()){const t=[];var n,o;if(null!==e&&void 0!==e&&e.data&&"modelVersions"in e.data)null===(n=e.data)||void 0===n||null===(o=n.modelVersions)||void 0===o||o.forEach((e=>{t.push({displayedName:e.name,version:e.version,link:e.name&&e.version?c.fM.getModelVersionPageRoute(e.name,e.version):"",status:e.status,source:e.source})}));return t}return r?r.map((e=>{const t=e.name,r=c.fM.getModelVersionPageRoute(t,e.version);return{displayedName:e.name,version:e.version,link:r,status:e.status,source:e.source}})):[]},v=e=>(0,n.keyBy)(e,"key"),g=e=>null===e||void 0===e?void 0:e.map((e=>{var t,r,o,a,i,s,l,d,u,c,m,v,g,p;return{dataset:{digest:null!==(t=null===(r=e.dataset)||void 0===r?void 0:r.digest)&&void 0!==t?t:"",name:null!==(o=null===(a=e.dataset)||void 0===a?void 0:a.name)&&void 0!==o?o:"",profile:null!==(i=null===(s=e.dataset)||void 0===s?void 0:s.profile)&&void 0!==i?i:"",schema:null!==(l=null===(d=e.dataset)||void 0===d?void 0:d.schema)&&void 0!==l?l:"",source:null!==(u=null===(c=e.dataset)||void 0===c?void 0:c.source)&&void 0!==u?u:"",sourceType:null!==(m=null===(v=e.dataset)||void 0===v?void 0:v.sourceType)&&void 0!==m?m:""},tags:null!==(g=null===(p=e.tags)||void 0===p?void 0:p.map((e=>{var t,r;return{key:null!==(t=e.key)&&void 0!==t?t:"",value:null!==(r=e.value)&&void 0!==r?r:""}})).filter((e=>!(0,n.isEmpty)(e.key))))&&void 0!==g?g:[]}})),p=({runUuid:e,experimentId:t})=>{var r,c,p,f,h,y;const E=(0,u.wD)(),D=(0,a.wA)(),M=!0;if(E){var k,I,w,A,T,_;const t=(()=>(0,d.t)({runUuid:e}))();(0,o.useEffect)((()=>{(0,u._O)()||D((0,s.hY)({run_id:e}))}),[D,e,M]);const{latestMetrics:r,tags:a,params:i,datasets:l}=(0,o.useMemo)((()=>{var e,r,o,a,i,s,l,d,u,c,m,p;return{latestMetrics:(0,n.pickBy)(v((p=null!==(e=null===(r=t.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.metrics)&&void 0!==e?e:[],p.filter((({key:e,value:t,step:r,timestamp:n})=>null!==e&&null!==t&&null!==r&&null!==n)).map((({key:e,value:t,step:r,timestamp:n})=>({key:e,value:t,step:Number(r),timestamp:Number(n)}))))),(e=>e.key.trim().length>0)),tags:(0,n.pickBy)(v(null!==(a=null===(i=t.data)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.tags)&&void 0!==a?a:[]),(e=>e.key.trim().length>0)),params:(0,n.pickBy)(v(null!==(l=null===(d=t.data)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.params)&&void 0!==l?l:[]),(e=>e.key.trim().length>0)),datasets:g(null===(c=t.data)||void 0===c||null===(m=c.inputs)||void 0===m?void 0:m.datasetInputs)}}),[t.data]),c=m({runUuid:e,queryResult:t});return{runInfo:null!==(k=null===(I=t.data)||void 0===I?void 0:I.info)&&void 0!==k?k:void 0,experiment:null!==(w=null===(A=t.data)||void 0===A?void 0:A.experiment)&&void 0!==w?w:void 0,loading:t.loading,error:t.apolloError,apiError:t.apiError,refetchRun:t.refetchRun,runInputs:null===(T=t.data)||void 0===T?void 0:T.inputs,runOutputs:null===(_=t.data)||void 0===_?void 0:_.outputs,registeredModelVersionSummaries:c,datasets:l,latestMetrics:r,tags:a,params:i}}const F=((e,t,r=!0)=>{const[d,u]=(0,o.useState)(""),[c,m]=(0,o.useState)(""),v=(0,a.wA)(),{runInfo:g,tags:p,latestMetrics:f,experiment:h,params:y,datasets:E}=(0,a.d4)((r=>({runInfo:r.entities.runInfosByUuid[e],tags:(0,n.pickBy)(r.entities.tagsByRunUuid[e],(e=>e.key.trim().length>0)),latestMetrics:(0,n.pickBy)(r.entities.latestMetricsByRunUuid[e],(e=>e.key.trim().length>0)),params:(0,n.pickBy)(r.entities.paramsByRunUuid[e],(e=>e.key.trim().length>0)),experiment:r.entities.experimentsById[t],datasets:r.entities.runDatasetsByUuid[e]}))),D=(0,o.useCallback)((()=>{const t=(0,i.aO)(e);return u(t.meta.id),v(t)}),[v,e]),M=(0,o.useCallback)((()=>{const e=(0,i.yc)(t);return m(e.meta.id),v(e)}),[v,t]),k=(0,o.useCallback)((()=>{r&&v((0,s.hY)({run_id:e}))}),[v,e,r]);(0,o.useEffect)((()=>{g||D().catch((e=>l.A.logErrorAndNotifyUser(e))),k()}),[g,D,k]),(0,o.useEffect)((()=>{h||M().catch((e=>l.A.logErrorAndNotifyUser(e)))}),[h,M]);const{loading:I,error:w}=(0,a.d4)((e=>{var t,r,n,o;return{loading:!d||Boolean(null===(t=e.apis)||void 0===t||null===(r=t[d])||void 0===r?void 0:r.active),error:null===(n=e.apis)||void 0===n||null===(o=n[d])||void 0===o?void 0:o.error}})),{loading:A,error:T}=(0,a.d4)((e=>{var t,r,n,o;return{loading:!d||Boolean(null===(t=e.apis)||void 0===t||null===(r=t[c])||void 0===r?void 0:r.active),error:null===(n=e.apis)||void 0===n||null===(o=n[c])||void 0===o?void 0:o.error}}));return{loading:I||A,data:{runInfo:g,tags:p,params:y,latestMetrics:f,experiment:h,datasets:E},refetchRun:D,errors:{runFetchError:w,experimentFetchError:T}}})(e,t,M),x=F.errors.runFetchError||F.errors.experimentFetchError,R=m({runUuid:e});return{runInfo:null===(r=F.data)||void 0===r?void 0:r.runInfo,latestMetrics:null===(c=F.data)||void 0===c?void 0:c.latestMetrics,tags:null===(p=F.data)||void 0===p?void 0:p.tags,experiment:null===(f=F.data)||void 0===f?void 0:f.experiment,params:null===(h=F.data)||void 0===h?void 0:h.params,datasets:null===(y=F.data)||void 0===y?void 0:y.datasets,loading:F.loading,error:x,runFetchError:F.errors.runFetchError,experimentFetchError:F.errors.experimentFetchError,refetchRun:F.refetchRun,registeredModelVersionSummaries:R}}},29774:function(e,t,r){r.d(t,{Au:function(){return s},tF:function(){return l}});var n=r(46709),o=r(36476),a=r(73408);const i=(0,n.createContext)({currentUserActionError:null,handleError:()=>{},handlePromise:()=>{},clearUserActionError:()=>{}}),s=({children:e,errorFilter:t})=>{const[r,s]=(0,n.useState)(null),l=(0,n.useCallback)(((e,r)=>{if(null===t||void 0===t||!t(e)){const t=(0,o.a$)(e);s(t),r&&r(t)}}),[s,t]),d=(0,n.useCallback)((e=>{e.catch((e=>{l(e)}))}),[l]),u=(0,n.useCallback)((()=>{s(null)}),[s]);return(0,a.Y)(i.Provider,{value:(0,n.useMemo)((()=>({currentUserActionError:r,handleError:l,handlePromise:d,clearUserActionError:u})),[u,r,l,d]),children:e})},l=()=>{const{currentUserActionError:e,handleError:t,handlePromise:r,clearUserActionError:o}=(0,n.useContext)(i),a=(0,n.useCallback)(((e,r,n)=>{t(r,n)}),[t]);return(0,n.useMemo)((()=>({currentUserActionError:e,handleError:t,handleErrorWithEvent:a,handlePromise:r,clearUserActionError:o})),[o,t,r,e,a])}},50383:function(e,t,r){r.d(t,{f:function(){return d}});r(46709);var n=r(79081),o=r(7655),a=r(73408);const i=86400,s={timeZoneName:"short",year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"},l=({date:e,intl:t,tooltipFormatOptions:r=s})=>{const n=new Date,o=Math.round((n.getTime()-e.getTime())/1e3),a=navigator.language||"en-US";let l="";try{l=Intl.DateTimeFormat(a,r).format(e)}catch(d){}for(const s of(e=>[{seconds:31536e3,timeAgoMessage:t=>e.formatMessage({id:"NF6ePS",defaultMessage:"{count, plural, =1 {1 year} other {# years}} ago"},{count:t})},{seconds:2592e3,timeAgoMessage:t=>e.formatMessage({id:"N79Rdb",defaultMessage:"{count, plural, =1 {1 month} other {# months}} ago"},{count:t})},{seconds:i,timeAgoMessage:t=>e.formatMessage({id:"XwD3hV",defaultMessage:"{count, plural, =1 {1 day} other {# days}} ago"},{count:t})},{seconds:3600,timeAgoMessage:t=>e.formatMessage({id:"i1Hj20",defaultMessage:"{count, plural, =1 {1 hour} other {# hours}} ago"},{count:t})},{seconds:60,timeAgoMessage:t=>e.formatMessage({id:"ZO8PZt",defaultMessage:"{count, plural, =1 {1 minute} other {# minutes}} ago"},{count:t})},{seconds:1,timeAgoMessage:t=>e.formatMessage({id:"gQB+Vs",defaultMessage:"{count, plural, =1 {1 second} other {# seconds}} ago"},{count:t})}])(t)){const e=Math.floor(o/s.seconds);if(e>=1)return{displayText:s.timeAgoMessage(e),tooltipTitle:l}}return{displayText:t.formatMessage({id:"ZOsiNc",defaultMessage:"just now"}),tooltipTitle:l}},d=({date:e,tooltipFormatOptions:t=s})=>{const r=(0,o.A)(),{displayText:i,tooltipTitle:d}=l({date:e,intl:r,tooltipFormatOptions:t});return(0,a.Y)(n.T,{componentId:"web-shared.time-ago",content:d,children:(0,a.Y)("span",{children:i})})}},75173:function(e,t,r){r.d(t,{Xs:function(){return g},s7:function(){return p}});var n=r(46709),o=r(48292),a=r(99002),i=r(19816),s=r(76118),l=r(36476),d=r(24523),u=r(40724),c=r(73408);class m extends l.ZR{constructor(...e){super(...e),this.errorLogType=l.ZQ.UnexpectedSystemStateError,this.errorName=l.UW.DatasetRunNotFoundError,this.isUserError=!0,this.displayMessage=(0,c.Y)(u.A,{id:"vwDBPr",defaultMessage:"The run containing the dataset could not be found."})}}const v=(0,n.createContext)({onDatasetClicked:()=>Promise.resolve()}),g=({children:e})=>{const[t,r]=(0,n.useState)(!1),[l,u]=(0,n.useState)(),[g]=(0,a.T)(),p=(0,n.useRef)(null),f=(0,n.useCallback)((async e=>new Promise(((t,n)=>{var o;return null===(o=p.current)||void 0===o||o.call(p),g({onError:n,onCompleted(o){var a,l,c,v,g,f,h,y,E,D,M;if(null!==(a=o.mlflowGetRun)&&void 0!==a&&a.apiError){const e=o.mlflowGetRun.apiError.code===d.tG.RESOURCE_DOES_NOT_EXIST?new m:o.mlflowGetRun.apiError;return void n(e)}const k=(0,i.u)(null===(l=o.mlflowGetRun)||void 0===l||null===(c=l.run)||void 0===c||null===(v=c.inputs)||void 0===v?void 0:v.datasetInputs);if(!k||null===(g=o.mlflowGetRun)||void 0===g||null===(f=g.run)||void 0===f||!f.info)return void t();const I=null===k||void 0===k?void 0:k.find((t=>{var r;return(null===(r=t.dataset)||void 0===r?void 0:r.digest)===e.datasetDigest&&t.dataset.name===e.datasetName}));if(!I)return void t();const{info:w,data:A}=o.mlflowGetRun.run,T=(0,s.keyBy)(null!==(h=null===A||void 0===A||null===(y=A.tags)||void 0===y?void 0:y.filter((e=>e.key&&e.value)))&&void 0!==h?h:[],"key");r(!0),u({datasetWithTags:{dataset:I.dataset,tags:I.tags},runData:{datasets:k,runUuid:null!==(E=w.runUuid)&&void 0!==E?E:"",experimentId:null!==(D=w.experimentId)&&void 0!==D?D:"",runName:null!==(M=w.runName)&&void 0!==M?M:"",tags:T}}),t(),p.current=null},variables:{data:{runId:e.runId}}})}))),[g]),h=(0,n.useMemo)((()=>({onDatasetClicked:f})),[f]);return(0,c.FD)(v.Provider,{value:h,children:[e,l&&(0,c.Y)(o.O,{isOpen:t,selectedDatasetWithRun:l,setIsOpen:r,setSelectedDatasetWithRun:u})]})},p=()=>(0,n.useContext)(v)},79557:function(e,t,r){r.d(t,{J:function(){return f}});var n=r(68248),o=r(27757),a=r(79081),i=r(74060),s=r(16389),l=r(44105),d=r(91701),u=r(42762),c=r(46709),m=r(91105),v=r(73408);var g={name:"1wcfv52",styles:"margin-right:0"},p={name:"1a7v7i3",styles:"margin-right:0;&>div{padding-right:0;}"};const f=({loggedModel:e,displayDetails:t,className:r})=>{var f,h,y,E;const[D]=(0,m.ok)(),M=(0,c.useMemo)((()=>{var t,r,n;return null!==(t=null===e||void 0===e||null===(r=e.info)||void 0===r||null===(n=r.tags)||void 0===n?void 0:n.reduce(((e,t)=>t.key?(e[t.key]=t,e):e),{}))&&void 0!==t?t:{}}),[null===e||void 0===e||null===(f=e.info)||void 0===f?void 0:f.tags]),k=null===M||void 0===M||null===(h=M[l.xd])||void 0===h?void 0:h.value,I=null===M||void 0===M||null===(y=M[s.A.gitCommitTag])||void 0===y?void 0:y.value,w=(0,c.useMemo)((()=>{try{return s.A.renderSource(M,D.toString(),void 0,k)}catch(e){return}}),[M,D,k]),A=null===(E=M[s.A.sourceTypeTag])||void 0===E?void 0:E.value,{theme:T}=(0,o.u)();return w?(0,v.FD)("div",{css:(0,n.AH)({display:"flex",alignItems:"center",gap:T.spacing.sm,paddingTop:T.spacing.sm,paddingBottom:T.spacing.sm,flexWrap:t?"wrap":void 0},""),className:r,children:[A&&(0,v.Y)(u.m,{sourceType:A,css:(0,n.AH)({color:T.colors.actionPrimaryBackgroundDefault},"")}),w," ",t&&k&&(0,v.Y)(a.T,{componentId:"mlflow.logged_model.details.source.branch_tooltip",content:k,children:(0,v.Y)(i.Tag,{componentId:"mlflow.logged_model.details.source.branch",css:g,children:(0,v.FD)("div",{css:(0,n.AH)({display:"flex",gap:T.spacing.xs,whiteSpace:"nowrap"},""),children:[(0,v.Y)(i.BranchIcon,{})," ",k]})})}),t&&I&&(0,v.FD)(o.aw.Root,{componentId:"mlflow.logged_model.details.source.commit_hash_popover",children:[(0,v.Y)(o.aw.Trigger,{asChild:!0,children:(0,v.Y)(i.Tag,{componentId:"mlflow.logged_model.details.source.commit_hash",css:p,children:(0,v.FD)("div",{css:(0,n.AH)({display:"flex",gap:T.spacing.xs,whiteSpace:"nowrap",alignContent:"center"},""),children:[(0,v.Y)(i.GitCommitIcon,{}),I.slice(0,7)]})})}),(0,v.FD)(o.aw.Content,{align:"start",children:[(0,v.Y)(o.aw.Arrow,{}),(0,v.FD)("div",{css:(0,n.AH)({display:"flex",gap:T.spacing.xs,alignItems:"center"},""),children:[I,(0,v.Y)(d.i,{showLabel:!1,size:"small",type:"tertiary",copyText:I,icon:(0,v.Y)(i.CopyIcon,{})})]})]})]})]}):(0,v.Y)(o.T.Hint,{children:"\u2014"})}},80625:function(e,t,r){r.d(t,{t:function(){return a}});var n=r(76118),o=r(46709);const a=(0,n.isFunction)(o.useDeferredValue)?o.useDeferredValue:n.identity},86134:function(e,t,r){r.d(t,{a:function(){return c}});var n=r(68248),o=r(74060),a=r(27757),i=r(66916),s=r(40724),l=r(67069),d=r(73408);const u=({status:e})=>e===l.Fq.LOGGED_MODEL_READY?(0,d.Y)(o.CheckCircleIcon,{color:"success"}):e===l.Fq.LOGGED_MODEL_UPLOAD_FAILED?(0,d.Y)(o.XCircleIcon,{color:"danger"}):e===l.Fq.LOGGED_MODEL_PENDING?(0,d.Y)(i.C,{color:"warning"}):null,c=({data:e})=>{var t,r;const{theme:i}=(0,a.u)(),c=null!==(t=null===(r=e.info)||void 0===r?void 0:r.status)&&void 0!==t?t:l.Fq.LOGGED_MODEL_STATUS_UNSPECIFIED;return c===l.Fq.LOGGED_MODEL_STATUS_UNSPECIFIED?null:(0,d.FD)(o.Tag,{componentId:"mlflow.logged_model.status",css:(0,n.AH)({backgroundColor:c===l.Fq.LOGGED_MODEL_READY?i.isDarkMode?i.colors.green800:i.colors.green100:c===l.Fq.LOGGED_MODEL_UPLOAD_FAILED?i.isDarkMode?i.colors.red800:i.colors.red100:c===l.Fq.LOGGED_MODEL_PENDING?i.isDarkMode?i.colors.yellow800:i.colors.yellow100:void 0},""),children:[c&&(0,d.Y)(u,{status:c})," ",(0,d.Y)(a.T.Text,{css:(0,n.AH)({marginLeft:i.spacing.sm},""),children:c===l.Fq.LOGGED_MODEL_READY?(0,d.Y)(a.T.Text,{color:"success",children:(0,d.Y)(s.A,{id:"Rs+SVS",defaultMessage:"Ready"})}):c===l.Fq.LOGGED_MODEL_UPLOAD_FAILED?(0,d.Y)(a.T.Text,{color:"error",children:(0,d.Y)(s.A,{id:"e6reUn",defaultMessage:"Failed"})}):c===l.Fq.LOGGED_MODEL_PENDING?(0,d.Y)(a.T.Text,{color:"warning",children:(0,d.Y)(s.A,{id:"jo4LfR",defaultMessage:"Pending"})}):c})]})}},97587:function(e,t,r){r.d(t,{f:function(){return u}});var n=r(68248),o=r(27757),a=r(74060),i=r(46709),s=r(75173),l=r(29774),d=r(73408);const u=({datasetName:e,datasetDigest:t,runId:r})=>{const{theme:u}=(0,o.u)(),[c,m]=(0,i.useState)(!1),{onDatasetClicked:v}=(0,s.s7)(),{handleError:g}=(0,l.tF)();return(0,d.FD)(o.B,{type:"link",icon:c?(0,d.Y)(o.S,{size:"small",css:(0,n.AH)({marginRight:u.spacing.sm},"")}):(0,d.Y)(a.TableIcon,{}),componentId:"mlflow.logged_model.dataset",onClick:()=>((e,t,r)=>{r&&(m(!0),null===v||void 0===v||v({datasetName:e,datasetDigest:t,runId:r}).catch((e=>{g(e)})).finally((()=>m(!1))))})(e,t,r),children:[e," (#",t,")"]},[e,t].join("."))}},99002:function(e,t,r){r.d(t,{T:function(){return i},t:function(){return a}});var n=r(34794);const o=n.J1`
  query GetRun($data: MlflowGetRunInput!) @component(name: "MLflow.ExperimentRunTracking") {
    mlflowGetRun(input: $data) {
      apiError {
        helpUrl
        code
        message
      }
      run {
        info {
          runName
          status
          runUuid
          experimentId
          artifactUri
          endTime
          lifecycleStage
          startTime
          userId
        }
        experiment {
          experimentId
          name
          tags {
            key
            value
          }
          artifactLocation
          lifecycleStage
          lastUpdateTime
        }
        modelVersions {
          status
          version
          name
          source
        }
        data {
          metrics {
            key
            value
            step
            timestamp
          }
          params {
            key
            value
          }
          tags {
            key
            value
          }
        }
        inputs {
          datasetInputs {
            dataset {
              digest
              name
              profile
              schema
              source
              sourceType
            }
            tags {
              key
              value
            }
          }
          modelInputs {
            modelId
          }
        }
        outputs {
          modelOutputs {
            modelId
            step
          }
        }
      }
    }
  }
`,a=({runUuid:e,disabled:t=!1})=>{var r,a;const{data:i,loading:s,error:l,refetch:d}=(0,n.IT)(o,{variables:{data:{runId:e}},skip:t});return{loading:s,data:null===i||void 0===i||null===(r=i.mlflowGetRun)||void 0===r?void 0:r.run,refetchRun:d,apolloError:l,apiError:null===i||void 0===i||null===(a=i.mlflowGetRun)||void 0===a?void 0:a.apiError}},i=()=>(0,n._l)(o)}}]);