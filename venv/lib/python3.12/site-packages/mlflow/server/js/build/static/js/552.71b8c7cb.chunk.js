"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[552,3447],{18705:function(e,n,t){t.d(n,{b:function(){return o}});var r=t(34794);const o=e=>{if(e)return e instanceof r.K4&&e.graphQLErrors.length>0?e.graphQLErrors.map((e=>e.message||e.toString())).join(", "):"message"in e?e.message:e.toString()}},30383:function(e,n,t){var r=t(46709),o=t(73408);class a extends r.Component{render(){return(0,o.Y)("div",{children:"Resource not found."})}}n.A=a},54401:function(e,n,t){t.d(n,{L:function(){return i}});t(46709);var r=t(74060),o=t(79081),a=t(73408);function i(e){const{usesFullHeight:n,...t}=e;return(0,a.FD)(r.PageWrapper,{css:n?s.useFullHeightLayout:s.wrapper,children:[(0,a.Y)(o.S,{css:s.fixedSpacer}),n?e.children:(0,a.Y)("div",{...t,css:s.container})]})}i.defaultProps={usesFullHeight:!1};const s={useFullHeightLayout:{height:"100%",display:"flex",flexDirection:"column","&:last-child":{flexGrow:1}},wrapper:{flex:1},fixedSpacer:{flexShrink:0},container:{width:"100%",flexGrow:1,paddingBottom:24}}},90996:function(e,n,t){t.d(n,{S:function(){return U}});var r=t(68248),o=t(46709),a=t(884),i=t(27757),s=t(79081),l=t(74060),d=t(40724),u=t(59930),c=t.n(u),m=t(73408);function g({children:e}){const{theme:n}=(0,i.u)();return(0,m.Y)("div",{css:(0,r.AH)({display:"flex",flexDirection:"column",gap:n.spacing.sm},""),children:e})}const p=(0,o.createContext)(null);function v({children:e,...n}){return(0,m.Y)(p.Provider,{value:n,children:e})}function h(){const e=(0,o.useContext)(p);return c()(e,"useTagAssignmentContext must be used within a TagAssignmentRoot"),e}function f({children:e,...n}){const t=(0,a.xW)(),r=(0,m.Y)(v,{...n,children:(0,m.Y)(g,{children:e})});return t?r:(c()(n.form,"Nest your component on a FormProvider or pass a form prop"),(0,m.Y)(a.Op,{...n.form,children:r}))}function y({children:e}){const{theme:n}=(0,i.u)(),t=o.Children.toArray(e);c()(t.length<=3,"TagAssignmentRow must have 3 children or less");const a=Array(3).fill(null).map(((e,r)=>{var o;return null!==(o=t[r])&&void 0!==o?o:(0,m.Y)("span",{style:{width:n.general.heightSm}},r)}));return(0,m.Y)("div",{css:(0,r.AH)({display:"grid",gridTemplateColumns:"1fr 1fr min-content",gap:n.spacing.sm},""),children:a})}function Y({children:e}){return(0,m.Y)(i.T.Text,{bold:!0,children:e})}var M=t(66916);var x={name:"82a6rk",styles:"flex:1"};const I=(0,o.forwardRef)((({errorMessage:e,...n},t)=>(0,m.FD)("div",{css:x,children:[(0,m.Y)(M.I,{validationState:e?"error":"info",...n,ref:t}),e&&(0,m.Y)(l.FormUI.Message,{message:e,type:"error"})]})));function A({index:e,rules:n,render:t}){const{name:r,keyProperty:o,getTagsValues:i,emptyValue:s,appendIfPossible:l}=h();return(0,m.Y)(a.xI,{name:`${r}.${e}.${o}`,rules:n,render:({field:e,fieldState:n,formState:r})=>{var a;const d=e.onChange;return e.onChange=function(e){var n;d(e);const t=i();null!==t&&void 0!==t&&null!==(n=t.at(-1))&&void 0!==n&&n[o]&&l(s,{shouldFocus:!1})},t?t({field:e,fieldState:n,formState:r}):(0,m.Y)(I,{componentId:"TagAssignmentKey.Default.Input",errorMessage:null===(a=n.error)||void 0===a?void 0:a.message,...e})}})}function b({rules:e,index:n,render:t}){const{name:r,valueProperty:o}=h();return(0,m.Y)(a.xI,{rules:e,name:`${r}.${n}.${o}`,render:({field:e,fieldState:n,formState:r})=>{var o;return t?t({field:e,fieldState:n,formState:r}):(0,m.Y)(I,{componentId:"TagAssignmentValue.Default.Input",errorMessage:null===(o=n.error)||void 0===o?void 0:o.message,...e})}})}function S(e){return(0,m.Y)(i.B,{icon:(0,m.Y)(l.TrashIcon,{}),...e})}function _({index:e,...n}){const{removeOrUpdate:t}=h();return(0,m.Y)(S,{onClick:()=>t(e),...n})}var T=t(7655);function R(e,n){if(void 0!==e)return 0===e&&c()(!1,"maxLength must be greater than 0"),{maxLength:{value:e,message:n.formatMessage({id:"JW0GbU",defaultMessage:"You can set a maximum of {maxLength} values"},{maxLength:e})}}}function C({name:e,maxLength:n,emptyValue:t,defaultValues:r,loading:i,form:s,keyProperty:l,valueProperty:d}){const[u]=(0,o.useState)(t),m=(0,a.xW)(),g=Boolean(m)&&!s,p=g?m:s;c()(p,"Nest your component on a FormProvider or pass a form prop"),c()(!(r&&g),"Define defaultValues at form context level");const{setValue:v}=p,h=function({name:e,maxLength:n,emptyValue:t,form:r,keyProperty:i}){const s=(0,T.A)(),l=(0,a.xW)(),d=Boolean(l)&&!r?l:r;c()(d,"Nest your component on a FormProvider or pass a form prop");const[u]=(0,o.useState)(t),{append:m,update:g,remove:p,...v}=(0,a.jz)({name:e,control:d.control,rules:R(n,s)}),{getValues:h}=d,f=(0,o.useCallback)((()=>h(e)),[h,e]),y=(0,o.useCallback)(((e,t)=>{const r=f();n&&r&&r.length>=n||m(e,t)}),[f,n,m]),Y=(0,o.useCallback)((e=>{const n=f();if(n&&e===n.length-1)return g(e,u);const t=null===n||void 0===n?void 0:n.at(-1);if(null!==t&&void 0!==t&&t[i])return p(e),void m(u,{shouldFocus:!1});p(e)}),[u,f,i,m,p,g]);return{form:d,...v,originalAppend:m,update:g,originalRemove:p,appendIfPossible:y,removeOrUpdate:Y,getTagsValues:f}}({name:e,maxLength:n,emptyValue:t,form:p,keyProperty:l}),f=h.getTagsValues;return(0,o.useEffect)((()=>{if(!i){if(r){const t=[...r];return(!n||n&&t.length<n)&&t.push(u),void v(e,t)}if(g){var t;const r=null!==(t=f())&&void 0!==t?t:[];return(!n||n&&r.length<n)&&r.push(u),void v(e,r)}v(e,[u])}}),[r,v,i,n,e,u,g,f]),{...h,form:p,maxLength:n,emptyValue:t,name:e,keyProperty:l,valueProperty:d}}const w="value",D=({form:e,name:n,initialTags:t})=>{const r=(0,T.A)(),o=C({name:n,emptyValue:{key:"",value:""},keyProperty:"key",valueProperty:w,form:e,defaultValues:t});return(0,m.FD)(f,{...o,children:[(0,m.FD)(y,{children:[(0,m.Y)(Y,{children:(0,m.Y)(d.A,{id:"h2SXjO",defaultMessage:"Key"})}),(0,m.Y)(Y,{children:(0,m.Y)(d.A,{id:"6yjymQ",defaultMessage:"Value"})})]}),o.fields.map(((e,n)=>(0,m.FD)(y,{children:[(0,m.Y)(A,{index:n,rules:{validate:{unique:e=>{const t=o.getTagsValues();return(null===t||void 0===t?void 0:t.findIndex((n=>n.key===e)))===n||r.formatMessage({id:"sLBHQp",defaultMessage:"Key must be unique"})},required:e=>{var t;const a=o.getTagsValues();return!(null!==a&&void 0!==a&&null!==(t=a.at(n))&&void 0!==t&&t[w]&&!e)||r.formatMessage({id:"J45Atg",defaultMessage:"Key is required if value is present"})}}}}),(0,m.Y)(b,{index:n}),(0,m.Y)(_,{index:n,componentId:"endpoint-tags-section.remove-button"})]},e.id)))]})},E="key",k="value",L="tags",F={key:"",value:""},U=({componentIdPrefix:e,title:n,visible:t,initialTags:u,isLoading:c=!1,error:g,onSubmit:p,onSuccess:v,onClose:h})=>{const f=`${e}.tag-assignment-modal`,[y,Y]=(0,o.useState)(!1),{theme:M}=(0,i.u)(),x=(0,a.mN)({mode:"onChange"}),I=()=>{Y(!1),x.reset({[L]:[F]}),null===h||void 0===h||h()},A=(0,m.Y)(d.A,{id:"AGWpnl",defaultMessage:"Add tags"});return{TagAssignmentModal:(0,m.FD)(s.d,{componentId:`${f}`,title:null!==n&&void 0!==n?n:A,visible:null!==t&&void 0!==t?t:y,destroyOnClose:!0,onCancel:I,footer:(0,m.FD)(m.FK,{children:[(0,m.Y)(i.B,{componentId:`${f}.submit-button`,onClick:I,disabled:c,children:(0,m.Y)(d.A,{id:"awekbG",defaultMessage:"Cancel"})}),(0,m.Y)(i.B,{componentId:`${f}.submit-button`,type:"primary",onClick:x.handleSubmit((e=>{var n,t;const r=e[L].filter((e=>Boolean(e[E]))),o=null!==(n=r.filter((e=>!(null!==u&&void 0!==u&&u.some((n=>n[E]===e[E]&&n[k]===e[k]))))))&&void 0!==n?n:[],a=null!==(t=null===u||void 0===u?void 0:u.filter((e=>!r.some((n=>n[E]===e[E]&&n[k]===e[k])))))&&void 0!==t?t:[];p(o,a).then((()=>{I(),null===v||void 0===v||v()}))})),loading:c,disabled:c,children:(0,m.Y)(d.A,{id:"C6ReUY",defaultMessage:"Save"})})]}),children:[g&&(0,m.Y)(l.Alert,{type:"error",message:g,componentId:`${f}.error`,closable:!1,css:(0,r.AH)({marginBottom:M.spacing.sm},"")}),(0,m.Y)(D,{name:L,form:x,initialTags:u})]}),showTagAssignmentModal:()=>{Y(!0)},hideTagAssignmentModal:I}}},99869:function(e,n,t){t.r(n),t.d(n,{RunPage:function(){return En},default:function(){return kn}});var r=t(68248),o=t(74060),a=t(27757),i=t(56530),s=t(59930),l=t.n(s),d=t(46709),u=t(54401),c=t(91105),m=t(16389),g=t(44105),p=t(71206),v=t(43075),h=t(93846),f=t(73408);const y=({runTags:e,experimentId:n,runOutputs:t,artifactUri:o,runUuid:i})=>{const{theme:s}=(0,a.u)(),l=(0,h.Ub)(`(min-width: ${s.responsive.breakpoints.sm}px)`);return(0,f.Y)("div",{css:(0,r.AH)({flex:1,overflow:"hidden",display:"flex",paddingBottom:s.spacing.md,position:"relative"},""),children:(0,f.Y)(v.Ay,{runUuid:i,runTags:e,runOutputs:t,useAutoHeight:l,artifactRootUri:o,experimentId:n})})};var Y=t(40724),M=t(10536),x=t(60284);const I=()=>{const{"*":e}=(0,c.g)();return"model-metrics"===e?g.N3.MODEL_METRIC_CHARTS:"system-metrics"===e?g.N3.SYSTEM_METRIC_CHARTS:"evaluations"===e?g.N3.EVALUATIONS:"traces"===e?g.N3.TRACES:null!==e&&void 0!==e&&e.match(/^(artifactPath|artifacts)/)?g.N3.ARTIFACTS:g.N3.OVERVIEW},A=[g.N3.ARTIFACTS,g.N3.EVALUATIONS],b=()=>{const{experimentId:e,runUuid:n}=(0,c.g)(),t=(0,c.Zp)(),{theme:r}=(0,a.u)(),i=I(),[s,l]=(0,d.useState)(A.includes(i));return(0,f.FD)(o.LegacyTabs,{activeKey:i,onChange:r=>{e&&n&&i!==r&&(l(A.includes(r)),r!==g.N3.OVERVIEW?t(x.Ay.getRunPageTabRoute(e,n,r)):t(x.Ay.getRunPageRoute(e,n)))},tabBarStyle:{margin:s&&"0px"},children:[(0,f.Y)(o.LegacyTabs.TabPane,{tab:(0,f.Y)(Y.A,{id:"kA+QJr",defaultMessage:"Overview"})},g.N3.OVERVIEW),(0,f.Y)(o.LegacyTabs.TabPane,{tab:(0,f.Y)(Y.A,{id:"j25Ttg",defaultMessage:"Model metrics"})},g.N3.MODEL_METRIC_CHARTS),(0,f.Y)(o.LegacyTabs.TabPane,{tab:(0,f.Y)(Y.A,{id:"hFlaPP",defaultMessage:"System metrics"})},g.N3.SYSTEM_METRIC_CHARTS),(0,f.Y)(o.LegacyTabs.TabPane,{tab:(0,f.Y)(Y.A,{id:"s8a93+",defaultMessage:"Traces"})},g.N3.EVALUATIONS),(0,f.Y)(o.LegacyTabs.TabPane,{tab:(0,f.Y)(Y.A,{id:"vPqFJE",defaultMessage:"Artifacts"})},g.N3.ARTIFACTS)]})};var S=t(76118),_=t(43835),T=t(673),R=(t(27206),t(10165));var C={name:"s5xdrg",styles:"display:flex;align-items:center"},w={name:"2ecpu6",styles:"margin-left:8px;margin-right:4px"};function D({models:e,onRegisterClick:n,experimentId:t,runUuid:i}){const{theme:s}=(0,a.u)(),l=(e,l)=>(0,f.FD)(o.DropdownMenu.Group,{children:[(0,f.Y)(o.DropdownMenu.Label,{children:e}),l.map((e=>{const l=(0,S.first)(e.registeredModelVersionSummaries);if(!l)return(0,f.FD)(o.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_50",onClick:()=>n(e),children:[(0,f.Y)("div",{css:(0,r.AH)({marginRight:s.spacing.md},""),children:(0,S.last)(e.path.split("/"))}),(0,f.Y)(o.DropdownMenu.HintColumn,{children:(0,f.Y)(c.N_,{target:"_blank",to:x.Ay.getRunPageTabRoute(t,i,"artifacts/"+e.path),children:(0,f.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_58",type:"link",size:"small",onClick:e=>{e.stopPropagation()},endIcon:(0,f.Y)(a.au,{}),children:(0,f.Y)(Y.A,{id:"NqEELO",defaultMessage:"View model"})})})})]},e.absolutePath);const{status:d,displayedName:u,version:m,link:g}=l;return(0,f.Y)(c.N_,{target:"_blank",to:g,children:(0,f.FD)(o.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_80",children:[(0,f.Y)(o.DropdownMenu.IconWrapper,{css:C,children:"READY"===d?(0,f.Y)(R.h,{}):d?T.UA[d]:null}),(0,f.FD)("span",{css:(0,r.AH)({marginRight:s.spacing.md},""),children:[u,(0,f.FD)(o.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_90",css:w,children:["v",m]})]}),(0,f.Y)(o.DropdownMenu.HintColumn,{children:(0,f.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_89",type:"link",size:"small",onClick:e=>{e.stopPropagation()},endIcon:(0,f.Y)(a.au,{}),children:(0,f.Y)(Y.A,{id:"T1sd79",defaultMessage:"Go to model"})})})]})},e.absolutePath)}))]}),d=e.filter((e=>e.registeredModelVersionSummaries.length>0)),u=e.filter((e=>!e.registeredModelVersionSummaries.length));return(0,f.FD)(f.FK,{children:[u.length?l("Unregistered models",u):null,u.length&&d.length?(0,f.Y)(o.DropdownMenu.Separator,{}):null,d.length?l("Registered models",d):null]})}const E=({runUuid:e,experimentId:n,runTags:t,artifactRootUri:i,registeredModelVersionSummaries:s})=>{const{theme:l}=(0,a.u)(),u=(0,d.useMemo)((()=>t?m.A.getLoggedModelsFromTags(t).map((({artifactPath:e})=>e)):[]),[t]),g=(0,d.useMemo)((()=>(0,S.orderBy)(u.map((e=>({path:e,absolutePath:`${i}/${e}`,registeredModelVersionSummaries:(null===s||void 0===s?void 0:s.filter((({source:n})=>n===`${i}/${e}`)))||[]}))),(e=>{var n;return parseInt((null===(n=e.registeredModelVersionSummaries[0])||void 0===n?void 0:n.version)||"0",10)}),"desc")),[u,s,i]),[p,v]=(0,d.useState)(null);if(g.length>1){const t=g.filter((e=>e.registeredModelVersionSummaries.length>0));return(0,f.FD)(f.FK,{children:[p&&(0,f.Y)(_.vR,{runUuid:e,modelPath:p.absolutePath,modelRelativePath:p.path,disabled:!1,showButton:!1,modalVisible:!0,onCloseModal:()=>v(null)}),(0,f.FD)(o.DropdownMenu.Root,{modal:!1,children:[(0,f.Y)(o.LegacyTooltip,{placement:"bottom",title:(0,f.Y)(Y.A,{id:"qE/ZB7",defaultMessage:"{registeredCount}/{loggedCount} logged models are registered",values:{registeredCount:t.length,loggedCount:g.length}}),children:(0,f.Y)(o.DropdownMenu.Trigger,{asChild:!0,children:(0,f.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_195",type:"primary",endIcon:(0,f.Y)(o.ChevronDownIcon,{}),children:(0,f.Y)(Y.A,{id:"WGN2f3",defaultMessage:"Register model"})})})}),(0,f.Y)(o.DropdownMenu.Content,{align:"end",children:(0,f.Y)(D,{models:g,onRegisterClick:v,experimentId:n,runUuid:e})})]})]})}const h=(0,S.first)(g);if(!h)return null;const y=(0,S.first)(h.registeredModelVersionSummaries);return y?(0,f.Y)(c.N_,{to:y.link,target:"_blank",css:(0,r.AH)({marginLeft:l.spacing.sm},""),children:(0,f.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_231",endIcon:(0,f.Y)(a.au,{}),type:"link",children:"Model registered"})}):(0,f.Y)(_.vR,{disabled:!1,runUuid:e,modelPath:h.absolutePath,modelRelativePath:h.path,showButton:!0,buttonType:"primary"})};var k=t(91944);var L={name:"ozd7xs",styles:"flex-shrink:0"};const F=({hasComparedExperimentsBefore:e,comparedExperimentIds:n=[],experiment:t,runDisplayName:r,runTags:o,runParams:a,runUuid:i,runOutputs:s,handleRenameRunClick:l,handleDeleteRunClick:u,artifactRootUri:m,registeredModelVersionSummaries:p,isLoading:v})=>{var h;const y=(0,d.useMemo)((()=>{var e,n;const r=(null===(e=t.tags)||void 0===e||null===(n=e.find((e=>e.key===k.kk)))||void 0===n?void 0:n.value)===g.Gk.GENAI_DEVELOPMENT,o=!(!s||!s.modelOutputs)&&s.modelOutputs.length>0;return r&&!o}),[t,s]),I=x.Ay.getExperimentPageTabRoute(null!==(h=t.experimentId)&&void 0!==h?h:"",y?g.fM.EvaluationRuns:g.fM.Runs);const A=[e&&n?(0,f.Y)(c.N_,{to:x.Ay.getCompareExperimentsPageRoute(n),children:(0,f.Y)(Y.A,{id:"LLm5Bo",defaultMessage:"Displaying Runs from {numExperiments} Experiments",values:{numExperiments:n.length}})}):(0,f.Y)(c.N_,{to:I,"data-testid":"experiment-runs-link",children:t.name})];t.experimentId&&A.push((0,f.Y)(c.N_,{to:I,"data-testid":"experiment-observatory-link-runs",children:y?(0,f.Y)(Y.A,{id:"/T979r",defaultMessage:"Evaluations"}):(0,f.Y)(Y.A,{id:"Rx8d9z",defaultMessage:"Runs"})}));return(0,f.FD)("div",{css:L,children:[(0,f.FD)(M.z,{title:(0,f.Y)("span",{"data-testid":"runs-header",children:r}),breadcrumbs:A,children:[(0,f.Y)(M.o,{menu:[{id:"overflow-rename-button",onClick:l,itemName:(0,f.Y)(Y.A,{id:"fv7vQf",defaultMessage:"Rename"})},...u?[{id:"overflow-delete-button",onClick:u,itemName:(0,f.Y)(Y.A,{id:"7WkP1e",defaultMessage:"Delete"})}]:[]]}),(()=>{var e;return(0,f.Y)(E,{runUuid:i,experimentId:null!==(e=null===t||void 0===t?void 0:t.experimentId)&&void 0!==e?e:"",runTags:o,artifactRootUri:m,registeredModelVersionSummaries:p})})()]}),(0,f.Y)(b,{})]})};var U=t(7655),N=t(79081),P=t(90142),V=t(31153);const B=({status:e})=>{const{theme:n}=(0,a.u)();return(0,f.FD)(o.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewstatusbox.tsx_81",css:(0,r.AH)({backgroundColor:"FINISHED"===e?n.isDarkMode?n.colors.green800:n.colors.green100:"KILLED"===e||"FAILED"===e?n.isDarkMode?n.colors.red800:n.colors.red100:"SCHEDULED"===e||"RUNNING"===e?n.isDarkMode?n.colors.blue800:n.colors.blue100:void 0},""),children:[e&&(0,f.Y)(V.F,{status:e})," ",(0,f.Y)(a.T.Text,{css:(0,r.AH)({marginLeft:n.spacing.sm},""),children:"FINISHED"===e?(0,f.Y)(a.T.Text,{color:"success",children:(0,f.Y)(Y.A,{id:"ujm55z",defaultMessage:"Finished"})}):"KILLED"===e?(0,f.Y)(a.T.Text,{color:"error",children:(0,f.Y)(Y.A,{id:"AupQl+",defaultMessage:"Killed"})}):"FAILED"===e?(0,f.Y)(a.T.Text,{color:"error",children:(0,f.Y)(Y.A,{id:"AM8DuO",defaultMessage:"Failed"})}):"RUNNING"===e?(0,f.Y)(a.T.Text,{color:"info",children:(0,f.Y)(Y.A,{id:"On3g1B",defaultMessage:"Running"})}):"SCHEDULED"===e?(0,f.Y)(a.T.Text,{color:"info",children:(0,f.Y)(Y.A,{id:"X8OaXU",defaultMessage:"Scheduled"})}):e})]})},O=({runInfo:e,tags:n})=>{var t;const r=m.A.getUser(e,n);return(0,f.Y)(c.N_,{to:x.Ay.searchRunsByUser(null!==(t=null===e||void 0===e?void 0:e.experimentId)&&void 0!==t?t:"",r),children:r})};var H=t(27461),z=t(66916),K=t(77680),$=t(55274),G=t(43617),W=t(90061),j=t(47207);const{systemMetricsLabel:q,modelMetricsLabel:Q}=(0,K.YK)({systemMetricsLabel:{id:"aFMLIO",defaultMessage:"System metrics"},modelMetricsLabel:{id:"NiSPrL",defaultMessage:"Model metrics"}}),J=e=>({key:n})=>n.toLowerCase().includes(e.toLowerCase()),X=({metricsList:e,runInfo:n,header:t,table:i})=>{var s,l;const{theme:d}=(0,a.u)(),[{column:u},...m]=i.getLeafHeaders(),p=null===(s=m.find((e=>"value"===e.id)))||void 0===s?void 0:s.column,v=e.some((({loggedModels:e})=>!(0,S.isEmpty)(e))),h=null===(l=m.find((e=>"models"===e.id)))||void 0===l?void 0:l.column;return e.length?(0,f.FD)(f.FK,{children:[t&&(0,f.Y)(o.TableRow,{children:(0,f.Y)(o.TableCell,{css:(0,r.AH)({flex:1,backgroundColor:d.colors.backgroundSecondary},""),children:(0,f.FD)(a.T.Text,{bold:!0,children:[t," (",e.length,")"]})})}),e.map((({key:e,value:t,loggedModels:a})=>{var i,s;return(0,f.FD)(o.TableRow,{children:[(0,f.Y)(o.TableCell,{style:{flex:u.getCanResize()?u.getSize()/100:void 0},children:(0,f.Y)(c.N_,{to:x.Ay.getRunPageTabRoute(null!==(i=n.experimentId)&&void 0!==i?i:"",null!==(s=n.runUuid)&&void 0!==s?s:"",g.N3.MODEL_METRIC_CHARTS),children:e})}),(0,f.Y)(o.TableCell,{css:(0,r.AH)({flex:null!==p&&void 0!==p&&p.getCanResize()?p.getSize()/100:void 0},""),children:t.toString()}),v&&(0,f.Y)(o.TableCell,{css:(0,r.AH)({flex:null!==h&&void 0!==h&&h.getCanResize()?h.getSize()/100:void 0},""),children:(0,S.isEmpty)(a)?"-":(0,f.Y)(o.Overflow,{children:null===a||void 0===a?void 0:a.map((e=>{var n,t,r,o,a,i;return(0,f.Y)(c.N_,{target:"_blank",rel:"noopener noreferrer",to:x.Ay.getExperimentLoggedModelDetailsPage(null!==(t=null===(r=e.info)||void 0===r?void 0:r.experiment_id)&&void 0!==t?t:"",null!==(o=null===(a=e.info)||void 0===a?void 0:a.model_id)&&void 0!==o?o:""),children:null===(i=e.info)||void 0===i?void 0:i.name},null===(n=e.info)||void 0===n?void 0:n.model_id)}))})})]},e)}))]}):null};var Z={name:"1gbhmpg",styles:"flex:0 0 auto;display:flex;flex-direction:column;overflow:hidden"},ee={name:"ozd7xs",styles:"flex-shrink:0"};const ne=({latestMetrics:e,runInfo:n,loggedModels:t})=>{const{theme:i}=(0,a.u)(),{detailsPageTableStyles:s,detailsPageNoEntriesStyles:l}=(0,j.z)(),u=(0,U.A)(),[c,m]=(0,d.useState)(""),g=(0,d.useMemo)((()=>{if(!t)return{};const e=(0,S.compact)((0,S.flatMap)(t,(e=>{var n,t;return null===(n=e.data)||void 0===n||null===(t=n.metrics)||void 0===t?void 0:t.map((({key:n})=>({key:n,model:e})))}))),n=(0,S.groupBy)(e,"key");return(0,S.mapValues)(n,(e=>e.map((({model:e})=>e))))}),[t]),p=(0,d.useMemo)((()=>{const n=(0,S.values)(e);return(0,S.isEmpty)(g)?n:n.map((e=>{var n;return{...e,loggedModels:null!==(n=g[e.key])&&void 0!==n?n:[]}}))}),[e,g]),v=p.some((({loggedModels:e})=>!(0,S.isEmpty)(e))),h=(0,d.useMemo)((()=>[{id:"models",header:u.formatMessage({id:"mRshzt",defaultMessage:"Models"}),accessorKey:"models",enableResizing:!0}]),[u]),y=(0,d.useMemo)((()=>{const e=[{id:"key",accessorKey:"key",header:()=>(0,f.Y)(Y.A,{id:"pjlcSc",defaultMessage:"Metric"}),enableResizing:!0,size:240},{id:"value",header:()=>(0,f.Y)(Y.A,{id:"t0Qkuc",defaultMessage:"Value"}),accessorKey:"value",enableResizing:!0}];return v&&e.push(...h),e}),[v,h]),M=(0,d.useMemo)((()=>{const e=p.filter((({key:e})=>(0,$.bw)(e))),n=p.filter((({key:e})=>!(0,$.bw)(e)));return e.length>0&&n.length>0?[{header:u.formatMessage(q),metrics:e.filter(J(c))},{header:u.formatMessage(Q),metrics:n.filter(J(c))}]:[{header:void 0,metrics:p.filter(J(c))}]}),[c,p,u]),x=(0,G.N4)({data:p,getCoreRowModel:(0,W.HT)(),getRowId:e=>e.key,enableColumnResizing:!0,columnResizeMode:"onChange",columns:y});return(0,f.FD)("div",{css:Z,children:[(0,f.Y)(a.T.Title,{level:4,css:ee,children:(0,f.Y)(Y.A,{id:"m4159e",defaultMessage:"Metrics ({length})",values:{length:p.filter(J(c)).length}})}),(0,f.Y)("div",{css:(0,r.AH)({padding:i.spacing.sm,border:`1px solid ${i.colors.borderDecorative}`,borderRadius:i.general.borderRadiusBase,display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},""),children:(()=>{if(!p.length)return(0,f.Y)("div",{css:l,children:(0,f.Y)(o.Empty,{description:(0,f.Y)(Y.A,{id:"9vj5Ap",defaultMessage:"No metrics recorded"})})});const e=(0,S.sum)(M.map((({metrics:e})=>e.length)))<1;return(0,f.FD)(f.FK,{children:[(0,f.Y)("div",{css:(0,r.AH)({marginBottom:i.spacing.sm},""),children:(0,f.Y)(z.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_186",prefix:(0,f.Y)(z.S,{}),placeholder:u.formatMessage({id:"w2+rkp",defaultMessage:"Search metrics"}),value:c,onChange:e=>m(e.target.value),allowClear:!0})}),(0,f.FD)(o.Table,{scrollable:!0,empty:e?(0,f.Y)("div",{children:(0,f.Y)(o.Empty,{description:(0,f.Y)(Y.A,{id:"lT1Joh",defaultMessage:"No metrics match the search filter"})})}):null,css:s,children:[(0,f.Y)(o.TableRow,{isHeader:!0,children:x.getLeafHeaders().map((e=>(0,f.Y)(o.TableHeader,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_312",header:e,column:e.column,setColumnSizing:x.setColumnSizing,isResizing:e.column.getIsResizing(),style:{flex:e.column.getCanResize()?e.column.getSize()/100:void 0},children:(0,G.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),M.map(((e,t)=>(0,f.Y)(X,{metricsList:e.metrics,runInfo:n,header:e.header,table:x},e.header||t)))]})]})})()})]})};var te=t(39606),re=t(48292);var oe=t(5690),ae=t(31655),ie=t(99002);const se=({parentRunUuid:e})=>{const n=(0,i.wA)(),t=(0,i.d4)((({entities:n})=>n.runInfosByUuid[e])),r=(0,ie.t)({runUuid:e,disabled:!(0,ae.wD)()}),a=(0,d.useMemo)((()=>{var e;return(0,ae.wD)()?null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.info:t}),[r,t]);return(0,d.useEffect)((()=>{(0,ae.wD)()||a||n((0,oe.aO)(e))}),[n,e,a]),a?a.experimentId&&a.runUuid?(0,f.Y)(c.N_,{to:x.Ay.getRunPageRoute(a.experimentId,a.runUuid),children:a.runName}):null:(0,f.Y)(o.ParagraphSkeleton,{loading:!0,label:(0,f.Y)(Y.A,{id:"nfIS4i",defaultMessage:"Parent run name loading"})})};var le=t(27042),de=t(90996),ue=t(59281),ce=t(181);var me={name:"1wcfv52",styles:"margin-right:0"};const ge=({runUuid:e,tags:n,onTagsUpdated:t})=>{const s=(0,ae.V0)(),[l,u]=(0,d.useState)(!1),{theme:c}=(0,a.u)(),m=(0,i.wA)(),g=(0,U.A)(),[p,v]=(0,d.useMemo)((()=>[(0,S.keys)(n).filter(ce.oD),(0,S.values)(n).filter((({key:e})=>(0,ce.oD)(e)))]),[n]),h=v.map((({key:e,value:n})=>({key:e,value:n}))),{TagAssignmentModal:y,showTagAssignmentModal:M}=(0,de.S)({componentIdPrefix:"mlflow.run-view-tags-box",initialTags:h,isLoading:l,onSubmit:(n,t)=>(u(!0),m((0,oe.cj)(e,n,t)).then((()=>{u(!1)}))),onSuccess:t}),{EditTagsModal:x,showEditTagsModal:I,isLoading:A}=(0,le.Q)({valueRequired:!0,allAvailableTags:p,saveTagsHandler:async(n,r,o)=>m((0,oe.hD)(e,r,o)).then(t)}),b=()=>{s?M():I({tags:v})},_=g.formatMessage({id:"EwAZgg",defaultMessage:"Edit tags"});return(0,f.FD)("div",{css:(0,r.AH)({paddingTop:c.spacing.xs,paddingBottom:c.spacing.xs,display:"flex",flexWrap:"wrap",alignItems:"center","> *":{marginRight:"0 !important"},gap:c.spacing.xs},""),children:[h.length<1?(0,f.Y)(a.B,{componentId:"mlflow.run_details.overview.tags.add_button",size:"small",type:"tertiary",onClick:b,children:(0,f.Y)(Y.A,{id:"dt3hj5",defaultMessage:"Add tags"})}):(0,f.FD)(f.FK,{children:[h.map((e=>(0,f.Y)(ue.t,{tag:e,enableFullViewModal:!0,css:me},`${e.key}-${e.value}`))),(0,f.Y)(N.T,{componentId:"mlflow.run_details.overview.tags.edit_button.tooltip",content:_,children:(0,f.Y)(a.B,{componentId:"mlflow.run_details.overview.tags.edit_button","aria-label":_,size:"small",icon:(0,f.Y)(o.PencilIcon,{}),onClick:b})})]}),A&&(0,f.Y)(a.S,{size:"small"}),x,y]})};var pe=t(52644),ve=t(53935);const he=({runUuid:e,tags:n,onDescriptionChanged:t})=>{var s;const l=(null===(s=n[ve.e])||void 0===s?void 0:s.value)||"",[u,c]=(0,d.useState)(!1),m=(0,U.A)(),{theme:g}=(0,a.u)(),p=(0,i.wA)(),v=!l;return(0,f.FD)("div",{css:(0,r.AH)({marginBottom:g.spacing.md},""),children:[(0,f.FD)(a.T.Title,{level:4,css:(0,r.AH)({display:"flex",alignItems:"center",gap:g.spacing.xs},""),children:[(0,f.Y)(Y.A,{id:"ugwpKL",defaultMessage:"Description"}),(0,f.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdescriptionbox.tsx_46",size:"small",type:"tertiary","aria-label":m.formatMessage({id:"Mtj9Ay",defaultMessage:"Edit description"}),onClick:()=>c(!0),icon:(0,f.Y)(o.PencilIcon,{})})]}),v&&!u&&(0,f.Y)(a.T.Hint,{children:(0,f.Y)(Y.A,{id:"VcNdOq",defaultMessage:"No description"})}),(!v||u)&&(0,f.Y)(pe.V,{defaultMarkdown:l,onSubmit:n=>p((0,oe.Jv)(e,ve.e,n)).then(t).then((()=>c(!1))),onCancel:()=>c(!1),showEditor:u})]})};t(69603);var fe={name:"e0dnmk",styles:"cursor:pointer"};const ye=({registeredModelVersionSummaries:e})=>{const{theme:n}=(0,a.u)();return(0,f.Y)(o.Overflow,{children:null===e||void 0===e?void 0:e.map((e=>(0,f.FD)(c.N_,{to:e.link,css:(0,r.AH)({display:"flex",alignItems:"center",gap:n.spacing.sm},""),children:[(0,f.Y)(R.h,{})," ",e.displayedName," ",(0,f.FD)(o.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewregisteredmodelsbox.tsx_40",css:fe,children:["v",e.version]})]},e.displayedName)))})};var Ye=t(49708),Me=t(59795);const xe=async({queryKey:e})=>{const[,{runUuid:n}]=e;return Me.M.getPromptVersionsForRun(n)};var Ie=t(6050);var Ae={name:"1bmnxg7",styles:"white-space:nowrap"};const be=({tags:e,runUuid:n})=>{const{theme:t}=(0,a.u)(),{data:i,error:s,isLoading:l}=(({runUuid:e},n={})=>{var t;const r=(0,Ye.I)(["run_uuid",{runUuid:e}],{queryFn:xe,retry:!1,...n});return{data:r.data,error:null!==(t=r.error)&&void 0!==t?t:void 0,isLoading:r.isLoading,refetch:r.refetch}})({runUuid:n}),d=[...(null===i||void 0===i?void 0:i.model_versions)||[],...(0,Ie.U7)(e)];return l?(0,f.Y)(o.ParagraphSkeleton,{}):s||!d||0===d.length?(0,f.Y)(a.T.Hint,{css:(0,r.AH)({padding:`${t.spacing.xs}px 0px`},""),children:"\u2014"}):(0,f.Y)("div",{css:(0,r.AH)({display:"flex",flexDirection:"row",gap:t.spacing.sm,flexWrap:"wrap",padding:`${t.spacing.xs}px 0px`},""),children:d.map(((e,n)=>{const t=x.Ay.getPromptDetailsPageRoute(encodeURIComponent(e.name)),r=`${e.name} (v${e.version})`;return(0,f.FD)(a.T.Text,{css:Ae,children:[(0,f.Y)(c.N_,{to:t,children:r}),n<d.length-1&&","]},r)}))})},Se=({loggedModels:e,loggedModelsV3:n,runInfo:t})=>{const{theme:i}=(0,a.u)(),{experimentId:s,runUuid:l}=t,u=e=>(0,S.first)(e)||(0,f.Y)(Y.A,{id:"0HbGko",defaultMessage:"Model"}),m=(0,d.useMemo)((()=>{const n=e.map((e=>u(e.flavors)));return new Set(n).size!==n.length}),[e]);return(0,f.FD)(o.Overflow,{children:[e.map(((e,n)=>(0,f.FD)(c.N_,{to:x.Ay.getRunPageRoute(null!==s&&void 0!==s?s:"",null!==l&&void 0!==l?l:"",e.artifactPath),css:(0,r.AH)({display:"flex",alignItems:"center",gap:i.spacing.sm,cursor:"pointer",height:m&&n>0?i.general.heightBase:i.general.heightSm},""),children:[(0,f.Y)(o.ModelsIcon,{}),(0,f.FD)("div",{children:[u(e.flavors),m&&n>0&&(0,f.Y)(a.T.Hint,{children:e.artifactPath})]})]},e.artifactPath))),n.map(((e,n)=>{var t,a,l,d,u;return(0,f.FD)(c.N_,{to:x.Ay.getExperimentLoggedModelDetailsPageRoute(null!==s&&void 0!==s?s:"",null!==(t=null===(a=e.info)||void 0===a?void 0:a.model_id)&&void 0!==t?t:""),css:(0,r.AH)({display:"flex",alignItems:"center",gap:i.spacing.sm,cursor:"pointer",height:m&&n>0?i.general.heightBase:i.general.heightSm},""),children:[(0,f.Y)(o.ModelsIcon,{}),(0,f.Y)("div",{children:null===(u=e.info)||void 0===u?void 0:u.name})]},null!==(l=null===(d=e.info)||void 0===d?void 0:d.model_id)&&void 0!==l?l:n)}))]})};var _e=t(91701),Te=t(42762);var Re={name:"1wcfv52",styles:"margin-right:0"},Ce={name:"kauk44",styles:"display:flex;gap:4px;white-space:nowrap"},we={name:"1a7v7i3",styles:"margin-right:0;&>div{padding-right:0;}"};const De=({runUuid:e,tags:n,search:t,className:i})=>{var s,l,d;const u=null===n||void 0===n||null===(s=n[g.xd])||void 0===s?void 0:s.value,c=null===n||void 0===n||null===(l=n[m.A.gitCommitTag])||void 0===l?void 0:l.value,p=m.A.renderSource(n,t,e,u),{theme:v}=(0,a.u)();return p?(0,f.FD)("div",{css:(0,r.AH)({display:"flex",alignItems:"center",gap:v.spacing.sm,paddingTop:v.spacing.sm,paddingBottom:v.spacing.sm,flexWrap:"wrap"},""),className:i,children:[(0,f.Y)(Te.m,{sourceType:null===(d=n[m.A.sourceTypeTag])||void 0===d?void 0:d.value,css:(0,r.AH)({color:v.colors.actionPrimaryBackgroundDefault},"")}),p," ",u&&(0,f.Y)(o.LegacyTooltip,{title:u,children:(0,f.Y)(o.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewsourcebox.tsx_48",css:Re,children:(0,f.FD)("div",{css:Ce,children:[(0,f.Y)(o.BranchIcon,{})," ",u]})})}),c&&(0,f.FD)(a.aw.Root,{componentId:"mlflow.run_details.overview.source.commit_hash_popover",children:[(0,f.Y)(a.aw.Trigger,{asChild:!0,children:(0,f.Y)(o.Tag,{componentId:"mlflow.run_details.overview.source.commit_hash",css:we,children:(0,f.FD)("div",{css:(0,r.AH)({display:"flex",gap:v.spacing.xs,whiteSpace:"nowrap",alignContent:"center"},""),children:[(0,f.Y)(o.GitCommitIcon,{}),c.slice(0,7)]})})}),(0,f.FD)(a.aw.Content,{align:"start",children:[(0,f.Y)(a.aw.Arrow,{}),(0,f.FD)("div",{css:(0,r.AH)({display:"flex",gap:v.spacing.xs,alignItems:"center"},""),children:[c,(0,f.Y)(_e.i,{showLabel:!1,size:"small",type:"tertiary",copyText:c,icon:(0,f.Y)(o.CopyIcon,{})})]})]})]})]}):(0,f.Y)(a.T.Hint,{children:"\u2014"})};t(48107);var Ee=t(20980),ke=t(88185);var Le=t(9230),Fe=t(6619),Ue=t(75173),Ne=t(59863);const Pe=[Fe.I7.RelationshipType,Fe.I7.Step,Fe.I7.Name,Fe.I7.Status,Fe.I7.CreationTime,Fe.I7.RegisteredModels,Fe.I7.Dataset];var Ve={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},Be={name:"g030ms",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:center"},Oe={name:"ozd7xs",styles:"flex-shrink:0"};const He=({inputs:e,outputs:n,runInfo:t,loggedModelsV3:i,isLoadingLoggedModels:s=!1,loggedModelsError:l})=>{const{theme:u}=(0,a.u)(),{models:c}=((e,n,t,r)=>{const o=(0,d.useMemo)((()=>{var n;return(0,S.compact)((0,S.uniq)(null===e||void 0===e||null===(n=e.modelInputs)||void 0===n?void 0:n.map((e=>e.modelId)))).map((e=>{const n=null===r||void 0===r?void 0:r.find((n=>{var t;return(null===(t=n.info)||void 0===t?void 0:t.model_id)===e}));if(n)return{...n,direction:"input"}}))}),[null===e||void 0===e?void 0:e.modelInputs,r]),a=(0,d.useMemo)((()=>{var e;return(0,S.compact)((0,S.uniq)(null===n||void 0===n||null===(e=n.modelOutputs)||void 0===e?void 0:e.map((e=>e.modelId)))).map((e=>{var t,o;const a=null===r||void 0===r?void 0:r.find((n=>{var t;return(null===(t=n.info)||void 0===t?void 0:t.model_id)===e})),i=null===n||void 0===n||null===(t=n.modelOutputs)||void 0===t?void 0:t.find((({modelId:e})=>{var n;return e===(null===a||void 0===a||null===(n=a.info)||void 0===n?void 0:n.model_id)}));if(a)return{...a,direction:"output",step:null!==(o=null===i||void 0===i?void 0:i.step)&&void 0!==o?o:void 0}}))}),[null===n||void 0===n?void 0:n.modelOutputs,r]);return{models:(0,d.useMemo)((()=>{var e,n;return null!==(e=(0,S.uniqBy)((0,S.compact)([...o,...a]).map((n=null===t||void 0===t?void 0:t.runUuid,e=>{var t;return null!==(t=e.data)&&void 0!==t&&t.metrics?{...e,data:{...e.data,metrics:e.data.metrics.filter((e=>!n||e.run_id===n))}}:e})),(e=>{var n;return null===(n=e.info)||void 0===n?void 0:n.model_id})))&&void 0!==e?e:[]}),[o,a,t])}})(e,n,t,i),[m,g]=(0,d.useState)({}),{columnDefs:p}=(0,Fe.ih)({loggedModels:c,columnVisibility:m,disablePinnedColumns:!0,disableOrderBy:!0,supportedAttributeColumnKeys:Pe});return(0,f.FD)("div",{css:Ve,children:[(0,f.FD)("div",{css:Be,children:[(0,f.Y)(a.T.Title,{level:4,css:Oe,children:(0,f.Y)(Y.A,{id:"km8vtM",defaultMessage:"Logged models ({length})",values:{length:c.length}})}),(0,f.Y)(Ne.$,{columnDefs:p,onUpdateColumns:g,columnVisibility:m,customTrigger:(0,f.Y)(a.B,{componentId:"mlflow.logged_model.list.columns",icon:(0,f.Y)(o.ColumnsIcon,{})})})]}),(0,f.Y)(N.S,{size:"sm",shrinks:!1}),(0,f.FD)("div",{css:(0,r.AH)({padding:u.spacing.sm,border:`1px solid ${u.colors.border}`,borderRadius:u.general.borderRadiusBase,display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},""),children:[l instanceof Error&&l.message&&(0,f.FD)(f.FK,{children:[(0,f.Y)(o.Alert,{type:"error",description:l.message,message:(0,f.Y)(Y.A,{id:"2BzYqp",defaultMessage:"Error loading logged models"}),closable:!1,componentId:"mlflow.run_page.logged_model.list.error"}),(0,f.Y)(N.S,{size:"sm",shrinks:!1})]}),(0,f.Y)(Ue.Xs,{children:(0,f.Y)(Le._,{columnDefs:p,loggedModels:c,columnVisibility:m,isLoading:s,isLoadingMore:!1,moreResultsAvailable:!1,disableLoadMore:!0,css:ze(u),displayShowExampleButton:!1})})]})]})},ze=e=>({"&.ag-theme-balham":{"--ag-border-color":e.colors.border,"--ag-row-border-color":e.colors.border,"--ag-foreground-color":e.colors.textPrimary,"--ag-background-color":"transparent","--ag-odd-row-background-color":"transparent","--ag-row-hover-color":e.colors.actionDefaultBackgroundHover,"--ag-selected-row-background-color":e.colors.actionDefaultBackgroundPress,"--ag-header-foreground-color":e.colors.textPrimary,"--ag-header-background-color":e.colors.backgroundPrimary,"--ag-modal-overlay-background-color":e.colors.overlayOverlay,".ag-header-row.ag-header-row-column-group":{"--ag-header-foreground-color":e.colors.textPrimary},borderTop:0,fontSize:e.typography.fontSizeBase,".ag-center-cols-viewport":{...(0,a.A)(e,{orientation:"horizontal"})}}});var Ke=t(23158),$e=t(21678);var Ge={name:"ti75j2",styles:"margin:0"};const We=({tags:e,runInfo:n,datasets:t})=>{const[i,s]=(0,d.useState)(null),[l,u]=(0,d.useState)(!1),{theme:c}=(0,a.u)();if(!t||!t.length)return null;return(0,f.FD)(f.FK,{children:[(0,f.Y)(o.Overflow,{children:t.map((o=>(0,f.Y)(a.T.Link,{componentId:"mlflow.run_details.datasets_box.dataset_link",css:(0,r.AH)({textAlign:"left",".anticon":{fontSize:c.general.iconFontSize}},""),onClick:()=>(r=>{var o,a,i;s({datasetWithTags:r,runData:{experimentId:null!==(o=n.experimentId)&&void 0!==o?o:void 0,runUuid:null!==(a=n.runUuid)&&void 0!==a?a:"",runName:null!==(i=n.runName)&&void 0!==i?i:void 0,datasets:t,tags:e}}),u(!0)})(o),children:(0,f.Y)(te.E,{datasetWithTags:o,displayTextAsLink:!0,css:Ge})})))}),i&&(0,f.Y)(re.O,{isOpen:l,setIsOpen:u,selectedDatasetWithRun:i,setSelectedDatasetWithRun:s})]})};var je=function(e){return e.DETAILS="DETAILS",e.DATASETS="DATASETS",e.TAGS="TAGS",e.REGISTERED_MODELS="REGISTERED_MODELS",e}(je||{});var qe={name:"67z2yy",styles:"flex:1;align-self:flex-start"},Qe={name:"1ctdo4k",styles:"min-height:360px;max-height:760px;overflow:hidden;display:flex"},Je={name:"1jf67h2",styles:"height:500px"};const Xe=({runUuid:e,onRunDataUpdated:n,tags:t,runInfo:o,datasets:i,params:s,latestMetrics:l,runInputs:u,runOutputs:p,registeredModelVersionSummaries:v,loggedModelsV3:h=[],isLoadingLoggedModels:y=!1,loggedModelsError:Y,experimentKind:M})=>{const{theme:I}=(0,a.u)(),{search:A}=(0,c.zy)(),b=((0,U.A)(),(0,d.useMemo)((()=>m.A.getLoggedModelsFromTags(t)),[t])),_=(t[P.Ol],!(0,S.isEmpty)(null===u||void 0===u?void 0:u.modelInputs)||!(0,S.isEmpty)(null===p||void 0===p?void 0:p.modelOutputs)),T=!_,{modelVersions:R}=(g.Gk.GENAI_DEVELOPMENT,(null===b||void 0===b?void 0:b.length)>0||(null===h||void 0===h||h.length),(0,Ee.b)({loggedModels:h})),C=(0,S.uniqBy)([...v,...R],(e=>null===e||void 0===e?void 0:e.link)),w=(({runUuid:e,runInfo:n,tags:t,onTagsUpdated:o,datasets:i,shouldRenderLoggedModelsBox:s,loggedModelsV3:l,registeredModelVersionSummaries:u})=>{var g,p,v;const h=(0,U.A)(),{theme:y}=(0,a.u)(),{search:Y}=(0,c.zy)(),M=(0,d.useMemo)((()=>m.A.getLoggedModelsFromTags(t)),[t]),I=t[P.Ol],A=n&&(0,f.FD)(f.FK,{children:[(0,f.Y)($e.wB,{keyValue:h.formatMessage({id:"PP5HZf",defaultMessage:"Created at"}),value:n.startTime?m.A.formatTimestamp(n.startTime,h):(0,f.Y)($e.bw,{})}),(0,f.Y)($e.wB,{keyValue:h.formatMessage({id:"7KKvmS",defaultMessage:"Created by"}),value:(0,f.Y)(O,{runInfo:n,tags:t})}),(0,f.Y)($e.wB,{keyValue:h.formatMessage({id:"ffema5",defaultMessage:"Experiment ID"}),value:(0,f.Y)(ke.t,{value:null!==(g=null===n||void 0===n?void 0:n.experimentId)&&void 0!==g?g:"",element:null!==n&&void 0!==n&&n.experimentId?(0,f.Y)(c.N_,{to:x.Ay.getExperimentPageRoute(n.experimentId),children:null===n||void 0===n?void 0:n.experimentId}):void 0})}),(0,f.Y)($e.wB,{keyValue:h.formatMessage({id:"vxY1CI",defaultMessage:"Status"}),value:(0,f.Y)(B,{status:n.status})}),(0,f.Y)($e.wB,{keyValue:h.formatMessage({id:"JYVQuV",defaultMessage:"Run ID"}),value:(0,f.Y)(ke.t,{value:null!==(p=n.runUuid)&&void 0!==p?p:""})}),(0,f.Y)($e.wB,{keyValue:h.formatMessage({id:"ZoIjun",defaultMessage:"Duration"}),value:m.A.getDuration(n.startTime,n.endTime)}),I&&(0,f.Y)($e.wB,{keyValue:h.formatMessage({id:"zdYXP8",defaultMessage:"Parent run"}),value:(0,f.Y)(se,{parentRunUuid:I.value})}),(0,f.Y)($e.wB,{keyValue:h.formatMessage({id:"WmDiY9",defaultMessage:"Source"}),value:(0,f.Y)(De,{tags:t,search:Y,runUuid:e,css:(0,r.AH)({paddingTop:y.spacing.xs,paddingBottom:y.spacing.xs},"")})}),s&&(0,f.Y)($e.wB,{keyValue:h.formatMessage({id:"mjNFJt",defaultMessage:"Logged models"}),value:(0,f.Y)(Se,{runInfo:n,loggedModels:M,loggedModelsV3:l})}),(0,f.Y)($e.wB,{keyValue:h.formatMessage({id:"UCQwvo",defaultMessage:"Registered prompts"}),value:(0,f.Y)(be,{tags:t,runUuid:e})})]});return[{id:je.DETAILS,title:h.formatMessage({id:"QGiy9C",defaultMessage:"About this run"}),content:A},{id:je.DATASETS,title:h.formatMessage({id:"yrsFOP",defaultMessage:"Datasets"}),content:null!==i&&void 0!==i&&i.length?(0,f.Y)(We,{tags:t,runInfo:n,datasets:i}):(0,f.Y)($e.bw,{})},{id:je.TAGS,title:h.formatMessage({id:"arFT1W",defaultMessage:"Tags"}),content:(0,f.Y)(ge,{runUuid:null!==(v=n.runUuid)&&void 0!==v?v:"",tags:t,onTagsUpdated:o})},{id:je.REGISTERED_MODELS,title:h.formatMessage({id:"HnGOwk",defaultMessage:"Registered models"}),content:(null===u||void 0===u?void 0:u.length)>0?(0,f.Y)(ye,{registeredModelVersionSummaries:u}):(0,f.Y)($e.bw,{})}]})({runUuid:e,runInfo:o,tags:t,onTagsUpdated:n,datasets:i,loggedModelsV3:h,shouldRenderLoggedModelsBox:T,registeredModelVersionSummaries:C}),D=!0;return(0,f.FD)(Ke.a,{css:qe,usingSidebarLayout:D,secondarySections:w,children:[(0,f.Y)(he,{runUuid:e,tags:t,onDescriptionChanged:n}),!1,(0,f.FD)("div",{css:[{flexDirection:"column"},{display:"flex",gap:I.spacing.lg,overflow:"hidden"},""],children:[(0,f.Y)(ne,{latestMetrics:l,runInfo:o,loggedModels:h}),(0,f.Y)(H.y,{params:s})]}),_&&(0,f.FD)(f.FK,{children:[!1,(0,f.Y)("div",{css:Qe,children:(0,f.Y)(He,{loggedModelsV3:h,isLoadingLoggedModels:y,inputs:u,outputs:p,runInfo:o,loggedModelsError:Y})})]}),!1,(0,f.Y)("div",{css:Je})]})};var Ze=t(19816),en=t(77153),nn=t(42110);function tn({runId:e}){return(0,f.Y)(nn.E,{statusCode:404,subMessage:`Run ID ${e} does not exist`,fallbackHomePageReactRoute:x.Ay.rootRoute})}var rn=t(24523),on=t(30383),an=t(91299),sn=t(94721),ln=t(35286),dn=t(18756);const un=({contextData:{metricsForRun:e},hoverData:n,chartData:{metricKey:t},isHovering:r,mode:o})=>{var i;const s=(0,ln.bL)(n)?n.hoveredDataPoint:n,l=(0,U.A)();if(o===ln.QS.MultipleTracesWithScanline&&(0,ln.bL)(n)&&r)return(0,f.Y)(dn.G,{hoverData:n});if(null===s||void 0===s||!s.metricEntity)return null;const{timestamp:d,step:u,value:c}=s.metricEntity,g=(null===e||void 0===e||null===(i=e[t])||void 0===i?void 0:i.length)>1,p=(0,$.bw)(t),v=g&&p&&!(0,S.isUndefined)(d),h=g&&!p&&!(0,S.isUndefined)(u);return(0,f.FD)("div",{children:[h&&(0,f.FD)("div",{css:cn.valueField,children:[(0,f.FD)("strong",{children:[(0,f.Y)(Y.A,{id:"a02Pn6",defaultMessage:"Step"}),":"]})," ",u]}),v&&(0,f.FD)("div",{css:cn.valueField,children:[(0,f.FD)("strong",{children:[(0,f.Y)(Y.A,{id:"faLIN+",defaultMessage:"Timestamp"}),":"]})," ",m.A.formatTimestamp(d,l)]}),c&&(0,f.FD)("div",{children:[(0,f.Y)(a.T.Text,{bold:!0,children:t}),(0,f.Y)(N.S,{size:"xs"}),(0,f.Y)(a.T.Text,{children:c})]})]})},cn={valueField:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}};var mn=t(86133),gn=t(53274),pn=t(51120),vn=t(55600),hn=t(95379),fn=t(58355),yn=t(57864),Yn=t(61293),Mn=t(47946),xn=t(67901),In=t(29757),An=t(6564);var bn={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},Sn={name:"1tc6xju",styles:"flex:1;overflow:auto"};const _n=({runInfo:e,metricKeys:n,mode:t,chartUIState:s,updateChartsUIState:l,latestMetrics:u={},params:c={},tags:m={}})=>{var p;const{theme:v}=(0,a.u)(),[h,y]=(0,d.useState)(""),{formatMessage:Y}=(0,U.A)(),{compareRunCharts:M,compareRunSections:x,chartsSearchFilter:I}=s,A=(0,d.useMemo)((()=>{var e;return null!==(e=null===M||void 0===M?void 0:M.filter((e=>!e.deleted)))&&void 0!==e?e:[]}),[M]),[b,_]=(0,d.useState)(void 0),T=(0,i.d4)((({entities:n})=>{var t;return(0,S.mapValues)(n.sampledMetricsByRunUuid[null!==(t=e.runUuid)&&void 0!==t?t:""],(e=>(0,S.compact)((0,S.values)(e).map((({metricsHistory:e})=>e)).flat())))})),R=(0,d.useMemo)((()=>({runInfo:e,metricsForRun:T})),[e,T]),{imagesByRunUuid:C}=(0,i.d4)((e=>({imagesByRunUuid:e.entities.imagesByRunUuid}))),[w,D]=(0,d.useState)(null),E=(0,hn.iO)(),k=(0,hn.cA)(),L=(0,hn.KP)(),F=(0,hn.Ez)(),N=(0,d.useMemo)((()=>{var n,t,r;return[{displayName:null!==(n=e.runName)&&void 0!==n?n:"",metrics:u,params:c,tags:m,images:C[null!==(t=e.runUuid)&&void 0!==t?t:""]||{},metricHistory:{},uuid:null!==(r=e.runUuid)&&void 0!==r?r:"",color:v.colors.primary,runInfo:e}]}),[e,u,c,m,C,v]);(0,d.useEffect)((()=>{if((!x||!M)&&N.length>0){const{resultChartSet:e,resultSectionSet:n}=mn.i$.getBaseChartAndSectionConfigs({runsData:N,enabledSectionNames:["model"===t?g.NN:g.rx],filterMetricNames:e=>{const n=e.startsWith(g.qt);return"model"===t?!n:n}});l((t=>({...t,compareRunCharts:e,compareRunSections:n})))}}),[M,x,N,t,l]),(0,d.useEffect)((()=>{l((e=>{if(!e.compareRunCharts||!e.compareRunSections)return e;const{resultChartSet:n,resultSectionSet:r,isResultUpdated:o}=mn.i$.updateChartAndSectionConfigs({compareRunCharts:e.compareRunCharts,compareRunSections:e.compareRunSections,runsData:N,isAccordionReordered:e.isAccordionReordered,filterMetricNames:e=>{const n=e.startsWith(g.qt);return"model"===t?!n:n}});return o?{...e,compareRunCharts:n,compareRunSections:r}:e}))}),[N,l,t]);const P=(0,Yn.$)(),V=s.autoRefreshEnabled&&(0,ae.vC)()&&P,B=Boolean(m[g.Cr]);return(0,Mn.L)({runUuids:[null!==(p=e.runUuid)&&void 0!==p?p:""],runUuidsIsActive:["RUNNING"===e.status],autoRefreshEnabled:V,enabled:B}),(0,f.FD)("div",{css:bn,children:[(0,f.FD)("div",{css:(0,r.AH)({paddingBottom:v.spacing.md,display:"flex",gap:v.spacing.sm,flex:"0 0 auto"},""),children:[(0,f.Y)(An.I,{chartsSearchFilter:I}),(0,ae.vC)()&&(0,f.Y)(o.ToggleButton,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetricchartsv2.tsx_244",pressed:s.autoRefreshEnabled,onPressedChange:e=>{l((n=>({...n,autoRefreshEnabled:e})))},children:Y({id:"zC/uKl",defaultMessage:"Auto-refresh"})}),(0,f.Y)(xn.f,{metricKeyList:n,globalLineChartConfig:s.globalLineChartConfig,updateUIState:l})]}),(0,f.Y)("div",{css:Sn,children:(0,f.Y)(ln.W,{contextData:R,component:un,children:(0,f.Y)(In.c_,{visibleChartCards:A,children:(0,f.Y)(pn.J,{compareRunSections:x,compareRunCharts:A,reorderCharts:E,insertCharts:k,chartData:N,startEditChart:e=>D(e),removeChart:L,addNewChartCard:e=>n=>D(mn.i$.getEmptyChartCardByType(n,!1,void 0,e)),search:null!==I&&void 0!==I?I:"",supportedChartTypes:[mn.zL.LINE,mn.zL.BAR,mn.zL.IMAGE],setFullScreenChart:_,autoRefreshEnabled:V,globalLineChartConfig:s.globalLineChartConfig,groupBy:null})})})}),w&&(0,f.Y)(vn.z,{chartRunData:N,metricKeyList:n,paramKeyList:[],config:w,onSubmit:e=>{F(e),D(null)},onCancel:()=>D(null),groupBy:null,supportedChartTypes:[mn.zL.LINE,mn.zL.BAR,mn.zL.IMAGE],globalLineChartConfig:s.globalLineChartConfig}),(0,f.Y)(yn._,{fullScreenChart:b,onCancel:()=>_(void 0),chartData:N,tooltipContextValue:R,tooltipComponent:un,autoRefreshEnabled:V,groupBy:null})]})},Tn=e=>{const n=`${e.runInfo.runUuid}-${e.mode}`,t=(0,d.useMemo)((()=>fn.A.getStoreForComponent("RunPage",n)),[n]),[r,o]=(0,d.useState)((()=>{const e={isAccordionReordered:!1,compareRunCharts:void 0,compareRunSections:void 0,autoRefreshEnabled:(0,ae.vC)(),globalLineChartConfig:{xAxisKey:gn.fj.STEP,lineSmoothness:0,selectedXAxisMetricKey:""}};try{const n=t.getItem("chartUIState");return n?JSON.parse(n):e}catch{return e}}));return(0,d.useEffect)((()=>{t.setItem("chartUIState",JSON.stringify(r))}),[r,t]),(0,f.Y)(hn.oB,{updateChartsUIState:o,children:(0,f.Y)(_n,{...e,chartUIState:r,updateChartsUIState:o})})};var Rn=t(18705),Cn=t(92550);var wn=t(79196);const Dn=()=>(0,f.FD)(u.L,{children:[(0,f.Y)(o.TitleSkeleton,{loading:!0,label:(0,f.Y)(Y.A,{id:"ea5zBl",defaultMessage:"Run page loading"})}),[...Array(3).keys()].map((e=>(0,f.Y)(o.ParagraphSkeleton,{seed:`s-${e}`},e)))]}),En=()=>{var e,n;const{runUuid:t,experimentId:s}=(0,c.g)(),v=(0,c.Zp)(),{theme:M}=(0,a.u)(),[A,b]=(0,d.useState)(!1),[_,T]=(0,d.useState)(!1);l()(t,"[RunPage] Run UUID route param not provided"),l()(s,"[RunPage] Experiment ID route param not provided");const R=t,C=s,{experiment:w,error:D,latestMetrics:E,loading:L,params:U,refetchRun:N,runInfo:P,tags:V,experimentFetchError:B,runFetchError:O,apiError:H,datasets:z,runInputs:K,runOutputs:G,registeredModelVersionSummaries:W}=(0,Ze.g)({experimentId:C,runUuid:R}),j=Boolean(P),[q,Q]=(0,d.useMemo)((()=>E?[Object.keys(E).filter((e=>!(0,$.bw)(e))),Object.keys(E).filter((e=>(0,$.bw)(e)))]:[[],[]]),[E]),{comparedExperimentIds:J=[],hasComparedExperimentsBefore:X=!1}=(0,i.d4)((e=>e.comparedExperiments||{})),Z=I(),ee=(0,ae.ht)(),ne=((e,n,t,r,o=!0)=>{const a=(0,d.useMemo)((()=>{var e,n;const o=[...null!==(e=null===t||void 0===t?void 0:t.modelInputs)&&void 0!==e?e:[],...null!==(n=null===r||void 0===r?void 0:r.modelOutputs)&&void 0!==n?n:[]],a=(0,S.uniq)((0,S.compact)(o.map((({modelId:e})=>e))));if(!(0,S.isEmpty)(a))return`attributes.model_id IN (${a.map((e=>`'${e}'`)).join(",")})`}),[t,r]),i=o&&Boolean(a),{data:s,isLoading:l,error:u}=(0,Cn.e)({experimentIds:[e],searchQuery:a},{enabled:i});return{models:i?s:void 0,isLoading:i&&l,error:u}})(C,0,K,G,!ee),te=(({runInputs:e,runOutputs:n,enabled:t=!0})=>{const r=(0,d.useMemo)((()=>{var t,r;const o=[...null!==(t=null===e||void 0===e?void 0:e.modelInputs)&&void 0!==t?t:[],...null!==(r=null===n||void 0===n?void 0:n.modelOutputs)&&void 0!==r?r:[]],a=(0,S.uniq)((0,S.compact)(o.map((({modelId:e})=>e))));if(!(0,S.isEmpty)(a))return a}),[e,n]),o=t&&!(0,S.isEmpty)(r),{data:a,isLoading:i,error:s}=(0,wn.o)({modelIds:r},{enabled:o});return{models:a,isLoading:o&&i,error:s}})({runInputs:K,runOutputs:G,enabled:ee}),{error:re,isLoading:oe,models:ie}=ee?te:ne,se=(0,h.Ub)(`(min-width: ${M.responsive.breakpoints.sm}px)`),le=L&&(!P||!w);return O instanceof en.s&&O.getErrorCode()===rn.tG.RESOURCE_DOES_NOT_EXIST||(null===H||void 0===H?void 0:H.code)===rn.tG.RESOURCE_DOES_NOT_EXIST||D&&(0,Rn.b)(D).match(/not found$/)?(0,f.Y)(tn,{runId:R}):B instanceof en.s&&B.getErrorCode()===rn.tG.RESOURCE_DOES_NOT_EXIST?(0,f.Y)(on.A,{}):O||B?null:(0,ae.wD)()&&(D||H)&&!j?(0,f.Y)("div",{css:(0,r.AH)({marginTop:M.spacing.lg},""),children:(0,f.Y)(o.Empty,{title:(0,f.Y)(Y.A,{id:"XaC3qF",defaultMessage:"Can't load run details"}),description:(0,Rn.b)(null!==H&&void 0!==H?H:D),image:(0,f.Y)(a.k,{})})}):!le&&P&&w?(0,f.FD)(f.FK,{children:[(0,f.FD)(u.L,{usesFullHeight:se,children:[(0,f.Y)(F,{comparedExperimentIds:J,experiment:w,handleRenameRunClick:()=>b(!0),handleDeleteRunClick:()=>T(!0),hasComparedExperimentsBefore:X,runDisplayName:m.A.getRunDisplayName(P,R),runTags:V,runParams:U,runUuid:R,runOutputs:G,artifactRootUri:null!==(e=null===P||void 0===P?void 0:P.artifactUri)&&void 0!==e?e:void 0,registeredModelVersionSummaries:W,isLoading:L||oe}),(0,f.Y)("div",{css:(0,r.AH)({flex:1,overflow:"auto",marginBottom:M.spacing.sm,display:"flex"},""),children:(()=>{var e;if(!P)return null;const n=()=>(0,f.Y)(an.r,{runUuid:R,runTags:V,experimentId:C,runDisplayName:m.A.getRunDisplayName(P,R)});switch(Z){case g.N3.MODEL_METRIC_CHARTS:return(0,f.Y)(Tn,{mode:"model",metricKeys:q,runInfo:P,latestMetrics:E,tags:V,params:U},"model");case g.N3.SYSTEM_METRIC_CHARTS:return(0,f.Y)(Tn,{mode:"system",metricKeys:Q,runInfo:P,latestMetrics:E,tags:V,params:U},"system");case g.N3.EVALUATIONS:return n();case g.N3.ARTIFACTS:return(0,f.Y)(y,{runUuid:R,runTags:V,runOutputs:G,experimentId:C,artifactUri:null!==(e=P.artifactUri)&&void 0!==e?e:void 0});case g.N3.TRACES:return n()}return(0,f.Y)(Xe,{runInfo:P,tags:V,params:U,latestMetrics:E,runUuid:R,onRunDataUpdated:N,runInputs:K,runOutputs:G,datasets:z,registeredModelVersionSummaries:W,loggedModelsV3:ie,isLoadingLoggedModels:oe,loggedModelsError:null!==re&&void 0!==re?re:void 0,experimentKind:(0,k.BH)(null===w||void 0===w?void 0:w.tags)})})()})]}),(0,f.Y)(p.j,{runUuid:R,onClose:()=>b(!1),runName:null!==(n=P.runName)&&void 0!==n?n:"",isOpen:A,onSuccess:N}),(0,f.Y)(sn.A,{selectedRunIds:[R],onClose:()=>T(!1),isOpen:_,onSuccess:()=>{v(x.Ay.getExperimentPageRoute(C))}})]}):(0,f.Y)(Dn,{})};var kn=En}}]);